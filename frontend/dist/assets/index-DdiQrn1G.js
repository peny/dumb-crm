import{r as w,a as Xr,b as se}from"./vendor-Gm9i_4Ku.js";import{u as Ks,N as Yr,a as Gr,L as K,O as ea,b as Qs,R as ta,c as ge,B as sa}from"./router-261hhpAR.js";import{B as ra,U as Bt,a as Ve,T as Ne,b as aa,X as na,M as ia,L as la,c as oa,E as ca,d as Zt,D as gs,P as Ce,S as gt,e as Be,f as $e,A as Zs,g as ut,h as da,i as ua}from"./ui-Bh5pEr_v.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Xs={exports:{}},bt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ma=w,fa=Symbol.for("react.element"),ha=Symbol.for("react.fragment"),xa=Object.prototype.hasOwnProperty,pa=ma.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ya={key:!0,ref:!0,__self:!0,__source:!0};function Ys(e,t,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(a in t)xa.call(t,a)&&!ya.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:fa,type:e,key:i,ref:l,props:n,_owner:pa.current}}bt.Fragment=ha;bt.jsx=Ys;bt.jsxs=Ys;Xs.exports=bt;var s=Xs.exports,$t={},bs=Xr;$t.createRoot=bs.createRoot,$t.hydrateRoot=bs.hydrateRoot;let ga={data:""},ba=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||ga,ja=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wa=/\/\*[^]*?\*\/|  +/g,js=/\n+/g,Ee=(e,t)=>{let r="",a="",n="";for(let i in e){let l=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+l+";":a+=i[1]=="f"?Ee(l,i):i+"{"+Ee(l,i[1]=="k"?"":t)+"}":typeof l=="object"?a+=Ee(l,t?t.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,o):o?o+" "+u:u)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Ee.p?Ee.p(i,l):i+":"+l+";")}return r+(t&&n?t+"{"+n+"}":n)+a},be={},Gs=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Gs(e[r]);return t}return e},Na=(e,t,r,a,n)=>{let i=Gs(e),l=be[i]||(be[i]=(u=>{let m=0,d=11;for(;m<u.length;)d=101*d+u.charCodeAt(m++)>>>0;return"go"+d})(i));if(!be[l]){let u=i!==e?e:(m=>{let d,h,g=[{}];for(;d=ja.exec(m.replace(wa,""));)d[4]?g.shift():d[3]?(h=d[3].replace(js," ").trim(),g.unshift(g[0][h]=g[0][h]||{})):g[0][d[1]]=d[2].replace(js," ").trim();return g[0]})(e);be[l]=Ee(n?{["@keyframes "+l]:u}:u,r?"":"."+l)}let o=r&&be.g?be.g:null;return r&&(be.g=be[l]),((u,m,d,h)=>{h?m.data=m.data.replace(h,u):m.data.indexOf(u)===-1&&(m.data=d?u+m.data:m.data+u)})(be[l],t,a,o),l},va=(e,t,r)=>e.reduce((a,n,i)=>{let l=t[i];if(l&&l.call){let o=l(r),u=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=u?"."+u:o&&typeof o=="object"?o.props?"":Ee(o,""):o===!1?"":o}return a+n+(l??"")},"");function jt(e){let t=this||{},r=e.call?e(t.p):e;return Na(r.unshift?r.raw?va(r,[].slice.call(arguments,1),t.p):r.reduce((a,n)=>Object.assign(a,n&&n.call?n(t.p):n),{}):r,ba(t.target),t.g,t.o,t.k)}let er,It,qt;jt.bind({g:1});let ve=jt.bind({k:1});function Sa(e,t,r,a){Ee.p=t,er=e,It=r,qt=a}function Fe(e,t){let r=this||{};return function(){let a=arguments;function n(i,l){let o=Object.assign({},i),u=o.className||n.className;r.p=Object.assign({theme:It&&It()},o),r.o=/ *go\d+/.test(u),o.className=jt.apply(r,a)+(u?" "+u:"");let m=e;return e[0]&&(m=o.as||e,delete o.as),qt&&m[0]&&qt(o),er(m,o)}return n}}var Ea=e=>typeof e=="function",mt=(e,t)=>Ea(e)?e(t):e,Aa=(()=>{let e=0;return()=>(++e).toString()})(),tr=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Ca=20,Xt="default",sr=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:a}=t;return sr(e,{type:e.toasts.find(l=>l.id===a.id)?1:0,toast:a});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(l=>l.id===n||n===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},it=[],rr={toasts:[],pausedAt:void 0,settings:{toastLimit:Ca}},pe={},ar=(e,t=Xt)=>{pe[t]=sr(pe[t]||rr,e),it.forEach(([r,a])=>{r===t&&a(pe[t])})},nr=e=>Object.keys(pe).forEach(t=>ar(e,t)),Fa=e=>Object.keys(pe).find(t=>pe[t].toasts.some(r=>r.id===e)),wt=(e=Xt)=>t=>{ar(t,e)},Ra={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Da=(e={},t=Xt)=>{let[r,a]=w.useState(pe[t]||rr),n=w.useRef(pe[t]);w.useEffect(()=>(n.current!==pe[t]&&a(pe[t]),it.push([t,a]),()=>{let l=it.findIndex(([o])=>o===t);l>-1&&it.splice(l,1)}),[t]);let i=r.toasts.map(l=>{var o,u,m;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((o=e[l.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((u=e[l.type])==null?void 0:u.duration)||(e==null?void 0:e.duration)||Ra[l.type],style:{...e.style,...(m=e[l.type])==null?void 0:m.style,...l.style}}});return{...r,toasts:i}},Oa=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Aa()}),Ze=e=>(t,r)=>{let a=Oa(t,e,r);return wt(a.toasterId||Fa(a.id))({type:2,toast:a}),a.id},Q=(e,t)=>Ze("blank")(e,t);Q.error=Ze("error");Q.success=Ze("success");Q.loading=Ze("loading");Q.custom=Ze("custom");Q.dismiss=(e,t)=>{let r={type:3,toastId:e};t?wt(t)(r):nr(r)};Q.dismissAll=e=>Q.dismiss(void 0,e);Q.remove=(e,t)=>{let r={type:4,toastId:e};t?wt(t)(r):nr(r)};Q.removeAll=e=>Q.remove(void 0,e);Q.promise=(e,t,r)=>{let a=Q.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(n=>{let i=t.success?mt(t.success,n):void 0;return i?Q.success(i,{id:a,...r,...r==null?void 0:r.success}):Q.dismiss(a),n}).catch(n=>{let i=t.error?mt(t.error,n):void 0;i?Q.error(i,{id:a,...r,...r==null?void 0:r.error}):Q.dismiss(a)}),e};var ka=1e3,_a=(e,t="default")=>{let{toasts:r,pausedAt:a}=Da(e,t),n=w.useRef(new Map).current,i=w.useCallback((h,g=ka)=>{if(n.has(h))return;let F=setTimeout(()=>{n.delete(h),l({type:4,toastId:h})},g);n.set(h,F)},[]);w.useEffect(()=>{if(a)return;let h=Date.now(),g=r.map(F=>{if(F.duration===1/0)return;let b=(F.duration||0)+F.pauseDuration-(h-F.createdAt);if(b<0){F.visible&&Q.dismiss(F.id);return}return setTimeout(()=>Q.dismiss(F.id,t),b)});return()=>{g.forEach(F=>F&&clearTimeout(F))}},[r,a,t]);let l=w.useCallback(wt(t),[t]),o=w.useCallback(()=>{l({type:5,time:Date.now()})},[l]),u=w.useCallback((h,g)=>{l({type:1,toast:{id:h,height:g}})},[l]),m=w.useCallback(()=>{a&&l({type:6,time:Date.now()})},[a,l]),d=w.useCallback((h,g)=>{let{reverseOrder:F=!1,gutter:b=8,defaultPosition:v}=g||{},y=r.filter(T=>(T.position||v)===(h.position||v)&&T.height),E=y.findIndex(T=>T.id===h.id),C=y.filter((T,D)=>D<E&&T.visible).length;return y.filter(T=>T.visible).slice(...F?[C+1]:[0,C]).reduce((T,D)=>T+(D.height||0)+b,0)},[r]);return w.useEffect(()=>{r.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let g=n.get(h.id);g&&(clearTimeout(g),n.delete(h.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:u,startPause:o,endPause:m,calculateOffset:d}}},Ta=ve`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,La=ve`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pa=ve`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ua=Fe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ta} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${La} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Pa} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Va=ve`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Ba=Fe("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Va} 1s linear infinite;
`,$a=ve`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ia=ve`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,qa=Fe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$a} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ia} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ma=Fe("div")`
  position: absolute;
`,Ha=Fe("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,za=ve`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Wa=Fe("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${za} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ja=({toast:e})=>{let{icon:t,type:r,iconTheme:a}=e;return t!==void 0?typeof t=="string"?w.createElement(Wa,null,t):t:r==="blank"?null:w.createElement(Ha,null,w.createElement(Ba,{...a}),r!=="loading"&&w.createElement(Ma,null,r==="error"?w.createElement(Ua,{...a}):w.createElement(qa,{...a})))},Ka=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Qa=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Za="0%{opacity:0;} 100%{opacity:1;}",Xa="0%{opacity:1;} 100%{opacity:0;}",Ya=Fe("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ga=Fe("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,en=(e,t)=>{let r=e.includes("top")?1:-1,[a,n]=tr()?[Za,Xa]:[Ka(r),Qa(r)];return{animation:t?`${ve(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ve(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},tn=w.memo(({toast:e,position:t,style:r,children:a})=>{let n=e.height?en(e.position||t||"top-center",e.visible):{opacity:0},i=w.createElement(Ja,{toast:e}),l=w.createElement(Ga,{...e.ariaProps},mt(e.message,e));return w.createElement(Ya,{className:e.className,style:{...n,...r,...e.style}},typeof a=="function"?a({icon:i,message:l}):w.createElement(w.Fragment,null,i,l))});Sa(w.createElement);var sn=({id:e,className:t,style:r,onHeightUpdate:a,children:n})=>{let i=w.useCallback(l=>{if(l){let o=()=>{let u=l.getBoundingClientRect().height;a(e,u)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,a]);return w.createElement("div",{ref:i,className:t,style:r},n)},rn=(e,t)=>{let r=e.includes("top"),a=r?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:tr()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...a,...n}},an=jt`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,at=16,nn=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:a,children:n,toasterId:i,containerStyle:l,containerClassName:o})=>{let{toasts:u,handlers:m}=_a(r,i);return w.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:at,left:at,right:at,bottom:at,pointerEvents:"none",...l},className:o,onMouseEnter:m.startPause,onMouseLeave:m.endPause},u.map(d=>{let h=d.position||t,g=m.calculateOffset(d,{reverseOrder:e,gutter:a,defaultPosition:t}),F=rn(h,g);return w.createElement(sn,{id:d.id,key:d.id,onHeightUpdate:m.updateHeight,className:d.visible?an:"",style:F},d.type==="custom"?mt(d.message,d):n?n(d):w.createElement(tn,{toast:d,position:h}))}))},k=Q;function ir(e,t){return function(){return e.apply(t,arguments)}}const{toString:ln}=Object.prototype,{getPrototypeOf:Yt}=Object,{iterator:Nt,toStringTag:lr}=Symbol,vt=(e=>t=>{const r=ln.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),de=e=>(e=e.toLowerCase(),t=>vt(t)===e),St=e=>t=>typeof t===e,{isArray:Ie}=Array,Qe=St("undefined");function Xe(e){return e!==null&&!Qe(e)&&e.constructor!==null&&!Qe(e.constructor)&&ae(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const or=de("ArrayBuffer");function on(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&or(e.buffer),t}const cn=St("string"),ae=St("function"),cr=St("number"),Ye=e=>e!==null&&typeof e=="object",dn=e=>e===!0||e===!1,lt=e=>{if(vt(e)!=="object")return!1;const t=Yt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(lr in e)&&!(Nt in e)},un=e=>{if(!Ye(e)||Xe(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},mn=de("Date"),fn=de("File"),hn=de("Blob"),xn=de("FileList"),pn=e=>Ye(e)&&ae(e.pipe),yn=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ae(e.append)&&((t=vt(e))==="formdata"||t==="object"&&ae(e.toString)&&e.toString()==="[object FormData]"))},gn=de("URLSearchParams"),[bn,jn,wn,Nn]=["ReadableStream","Request","Response","Headers"].map(de),vn=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ge(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,n;if(typeof e!="object"&&(e=[e]),Ie(e))for(a=0,n=e.length;a<n;a++)t.call(null,e[a],a,e);else{if(Xe(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let o;for(a=0;a<l;a++)o=i[a],t.call(null,e[o],o,e)}}function dr(e,t){if(Xe(e))return null;t=t.toLowerCase();const r=Object.keys(e);let a=r.length,n;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const De=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ur=e=>!Qe(e)&&e!==De;function Mt(){const{caseless:e}=ur(this)&&this||{},t={},r=(a,n)=>{const i=e&&dr(t,n)||n;lt(t[i])&&lt(a)?t[i]=Mt(t[i],a):lt(a)?t[i]=Mt({},a):Ie(a)?t[i]=a.slice():t[i]=a};for(let a=0,n=arguments.length;a<n;a++)arguments[a]&&Ge(arguments[a],r);return t}const Sn=(e,t,r,{allOwnKeys:a}={})=>(Ge(t,(n,i)=>{r&&ae(n)?e[i]=ir(n,r):e[i]=n},{allOwnKeys:a}),e),En=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),An=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Cn=(e,t,r,a)=>{let n,i,l;const o={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)l=n[i],(!a||a(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=r!==!1&&Yt(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Fn=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},Rn=e=>{if(!e)return null;if(Ie(e))return e;let t=e.length;if(!cr(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Dn=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Yt(Uint8Array)),On=(e,t)=>{const a=(e&&e[Nt]).call(e);let n;for(;(n=a.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},kn=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},_n=de("HTMLFormElement"),Tn=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),ws=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Ln=de("RegExp"),mr=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};Ge(r,(n,i)=>{let l;(l=t(n,i,e))!==!1&&(a[i]=l||n)}),Object.defineProperties(e,a)},Pn=e=>{mr(e,(t,r)=>{if(ae(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(ae(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Un=(e,t)=>{const r={},a=n=>{n.forEach(i=>{r[i]=!0})};return Ie(e)?a(e):a(String(e).split(t)),r},Vn=()=>{},Bn=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function $n(e){return!!(e&&ae(e.append)&&e[lr]==="FormData"&&e[Nt])}const In=e=>{const t=new Array(10),r=(a,n)=>{if(Ye(a)){if(t.indexOf(a)>=0)return;if(Xe(a))return a;if(!("toJSON"in a)){t[n]=a;const i=Ie(a)?[]:{};return Ge(a,(l,o)=>{const u=r(l,n+1);!Qe(u)&&(i[o]=u)}),t[n]=void 0,i}}return a};return r(e,0)},qn=de("AsyncFunction"),Mn=e=>e&&(Ye(e)||ae(e))&&ae(e.then)&&ae(e.catch),fr=((e,t)=>e?setImmediate:t?((r,a)=>(De.addEventListener("message",({source:n,data:i})=>{n===De&&i===r&&a.length&&a.shift()()},!1),n=>{a.push(n),De.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ae(De.postMessage)),Hn=typeof queueMicrotask<"u"?queueMicrotask.bind(De):typeof process<"u"&&process.nextTick||fr,zn=e=>e!=null&&ae(e[Nt]),x={isArray:Ie,isArrayBuffer:or,isBuffer:Xe,isFormData:yn,isArrayBufferView:on,isString:cn,isNumber:cr,isBoolean:dn,isObject:Ye,isPlainObject:lt,isEmptyObject:un,isReadableStream:bn,isRequest:jn,isResponse:wn,isHeaders:Nn,isUndefined:Qe,isDate:mn,isFile:fn,isBlob:hn,isRegExp:Ln,isFunction:ae,isStream:pn,isURLSearchParams:gn,isTypedArray:Dn,isFileList:xn,forEach:Ge,merge:Mt,extend:Sn,trim:vn,stripBOM:En,inherits:An,toFlatObject:Cn,kindOf:vt,kindOfTest:de,endsWith:Fn,toArray:Rn,forEachEntry:On,matchAll:kn,isHTMLForm:_n,hasOwnProperty:ws,hasOwnProp:ws,reduceDescriptors:mr,freezeMethods:Pn,toObjectSet:Un,toCamelCase:Tn,noop:Vn,toFiniteNumber:Bn,findKey:dr,global:De,isContextDefined:ur,isSpecCompliantForm:$n,toJSONObject:In,isAsyncFn:qn,isThenable:Mn,setImmediate:fr,asap:Hn,isIterable:zn};function L(e,t,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}x.inherits(L,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.status}}});const hr=L.prototype,xr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xr[e]={value:e}});Object.defineProperties(L,xr);Object.defineProperty(hr,"isAxiosError",{value:!0});L.from=(e,t,r,a,n,i)=>{const l=Object.create(hr);return x.toFlatObject(e,l,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),L.call(l,e.message,t,r,a,n),l.cause=e,l.name=e.name,i&&Object.assign(l,i),l};const Wn=null;function Ht(e){return x.isPlainObject(e)||x.isArray(e)}function pr(e){return x.endsWith(e,"[]")?e.slice(0,-2):e}function Ns(e,t,r){return e?e.concat(t).map(function(n,i){return n=pr(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}function Jn(e){return x.isArray(e)&&!e.some(Ht)}const Kn=x.toFlatObject(x,{},null,function(t){return/^is[A-Z]/.test(t)});function Et(e,t,r){if(!x.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=x.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!x.isUndefined(y[v])});const a=r.metaTokens,n=r.visitor||d,i=r.dots,l=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&x.isSpecCompliantForm(t);if(!x.isFunction(n))throw new TypeError("visitor must be a function");function m(b){if(b===null)return"";if(x.isDate(b))return b.toISOString();if(x.isBoolean(b))return b.toString();if(!u&&x.isBlob(b))throw new L("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(b)||x.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function d(b,v,y){let E=b;if(b&&!y&&typeof b=="object"){if(x.endsWith(v,"{}"))v=a?v:v.slice(0,-2),b=JSON.stringify(b);else if(x.isArray(b)&&Jn(b)||(x.isFileList(b)||x.endsWith(v,"[]"))&&(E=x.toArray(b)))return v=pr(v),E.forEach(function(T,D){!(x.isUndefined(T)||T===null)&&t.append(l===!0?Ns([v],D,i):l===null?v:v+"[]",m(T))}),!1}return Ht(b)?!0:(t.append(Ns(y,v,i),m(b)),!1)}const h=[],g=Object.assign(Kn,{defaultVisitor:d,convertValue:m,isVisitable:Ht});function F(b,v){if(!x.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(b),x.forEach(b,function(E,C){(!(x.isUndefined(E)||E===null)&&n.call(t,E,x.isString(C)?C.trim():C,v,g))===!0&&F(E,v?v.concat(C):[C])}),h.pop()}}if(!x.isObject(e))throw new TypeError("data must be an object");return F(e),t}function vs(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function Gt(e,t){this._pairs=[],e&&Et(e,this,t)}const yr=Gt.prototype;yr.append=function(t,r){this._pairs.push([t,r])};yr.toString=function(t){const r=t?function(a){return t.call(this,a,vs)}:vs;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function Qn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gr(e,t,r){if(!t)return e;const a=r&&r.encode||Qn;x.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(t,r):i=x.isURLSearchParams(t)?t.toString():new Gt(t,r).toString(a),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Ss{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){x.forEach(this.handlers,function(a){a!==null&&t(a)})}}const br={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zn=typeof URLSearchParams<"u"?URLSearchParams:Gt,Xn=typeof FormData<"u"?FormData:null,Yn=typeof Blob<"u"?Blob:null,Gn={isBrowser:!0,classes:{URLSearchParams:Zn,FormData:Xn,Blob:Yn},protocols:["http","https","file","blob","url","data"]},es=typeof window<"u"&&typeof document<"u",zt=typeof navigator=="object"&&navigator||void 0,ei=es&&(!zt||["ReactNative","NativeScript","NS"].indexOf(zt.product)<0),ti=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",si=es&&window.location.href||"http://localhost",ri=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:es,hasStandardBrowserEnv:ei,hasStandardBrowserWebWorkerEnv:ti,navigator:zt,origin:si},Symbol.toStringTag,{value:"Module"})),X={...ri,...Gn};function ai(e,t){return Et(e,new X.classes.URLSearchParams,{visitor:function(r,a,n,i){return X.isNode&&x.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function ni(e){return x.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ii(e){const t={},r=Object.keys(e);let a;const n=r.length;let i;for(a=0;a<n;a++)i=r[a],t[i]=e[i];return t}function jr(e){function t(r,a,n,i){let l=r[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),u=i>=r.length;return l=!l&&x.isArray(n)?n.length:l,u?(x.hasOwnProp(n,l)?n[l]=[n[l],a]:n[l]=a,!o):((!n[l]||!x.isObject(n[l]))&&(n[l]=[]),t(r,a,n[l],i)&&x.isArray(n[l])&&(n[l]=ii(n[l])),!o)}if(x.isFormData(e)&&x.isFunction(e.entries)){const r={};return x.forEachEntry(e,(a,n)=>{t(ni(a),n,r,0)}),r}return null}function li(e,t,r){if(x.isString(e))try{return(t||JSON.parse)(e),x.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const et={transitional:br,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,i=x.isObject(t);if(i&&x.isHTMLForm(t)&&(t=new FormData(t)),x.isFormData(t))return n?JSON.stringify(jr(t)):t;if(x.isArrayBuffer(t)||x.isBuffer(t)||x.isStream(t)||x.isFile(t)||x.isBlob(t)||x.isReadableStream(t))return t;if(x.isArrayBufferView(t))return t.buffer;if(x.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return ai(t,this.formSerializer).toString();if((o=x.isFileList(t))||a.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Et(o?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),li(t)):t}],transformResponse:[function(t){const r=this.transitional||et.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(x.isResponse(t)||x.isReadableStream(t))return t;if(t&&x.isString(t)&&(a&&!this.responseType||n)){const l=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(o){if(l)throw o.name==="SyntaxError"?L.from(o,L.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:X.classes.FormData,Blob:X.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};x.forEach(["delete","get","head","post","put","patch"],e=>{et.headers[e]={}});const oi=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ci=e=>{const t={};let r,a,n;return e&&e.split(`
`).forEach(function(l){n=l.indexOf(":"),r=l.substring(0,n).trim().toLowerCase(),a=l.substring(n+1).trim(),!(!r||t[r]&&oi[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},Es=Symbol("internals");function He(e){return e&&String(e).trim().toLowerCase()}function ot(e){return e===!1||e==null?e:x.isArray(e)?e.map(ot):String(e)}function di(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const ui=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Lt(e,t,r,a,n){if(x.isFunction(a))return a.call(this,t,r);if(n&&(t=r),!!x.isString(t)){if(x.isString(a))return t.indexOf(a)!==-1;if(x.isRegExp(a))return a.test(t)}}function mi(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function fi(e,t){const r=x.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(n,i,l){return this[a].call(this,t,n,i,l)},configurable:!0})})}let ne=class{constructor(t){t&&this.set(t)}set(t,r,a){const n=this;function i(o,u,m){const d=He(u);if(!d)throw new Error("header name must be a non-empty string");const h=x.findKey(n,d);(!h||n[h]===void 0||m===!0||m===void 0&&n[h]!==!1)&&(n[h||u]=ot(o))}const l=(o,u)=>x.forEach(o,(m,d)=>i(m,d,u));if(x.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(x.isString(t)&&(t=t.trim())&&!ui(t))l(ci(t),r);else if(x.isObject(t)&&x.isIterable(t)){let o={},u,m;for(const d of t){if(!x.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[m=d[0]]=(u=o[m])?x.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}l(o,r)}else t!=null&&i(r,t,a);return this}get(t,r){if(t=He(t),t){const a=x.findKey(this,t);if(a){const n=this[a];if(!r)return n;if(r===!0)return di(n);if(x.isFunction(r))return r.call(this,n,a);if(x.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=He(t),t){const a=x.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||Lt(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let n=!1;function i(l){if(l=He(l),l){const o=x.findKey(a,l);o&&(!r||Lt(a,a[o],o,r))&&(delete a[o],n=!0)}}return x.isArray(t)?t.forEach(i):i(t),n}clear(t){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const i=r[a];(!t||Lt(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const r=this,a={};return x.forEach(this,(n,i)=>{const l=x.findKey(a,i);if(l){r[l]=ot(n),delete r[i];return}const o=t?mi(i):String(i).trim();o!==i&&delete r[i],r[o]=ot(n),a[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return x.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=t&&x.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(n=>a.set(n)),a}static accessor(t){const a=(this[Es]=this[Es]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=He(l);a[o]||(fi(n,l),a[o]=!0)}return x.isArray(t)?t.forEach(i):i(t),this}};ne.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.reduceDescriptors(ne.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});x.freezeMethods(ne);function Pt(e,t){const r=this||et,a=t||r,n=ne.from(a.headers);let i=a.data;return x.forEach(e,function(o){i=o.call(r,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function wr(e){return!!(e&&e.__CANCEL__)}function qe(e,t,r){L.call(this,e??"canceled",L.ERR_CANCELED,t,r),this.name="CanceledError"}x.inherits(qe,L,{__CANCEL__:!0});function Nr(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new L("Request failed with status code "+r.status,[L.ERR_BAD_REQUEST,L.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function hi(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function xi(e,t){e=e||10;const r=new Array(e),a=new Array(e);let n=0,i=0,l;return t=t!==void 0?t:1e3,function(u){const m=Date.now(),d=a[i];l||(l=m),r[n]=u,a[n]=m;let h=i,g=0;for(;h!==n;)g+=r[h++],h=h%e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),m-l<t)return;const F=d&&m-d;return F?Math.round(g*1e3/F):void 0}}function pi(e,t){let r=0,a=1e3/t,n,i;const l=(m,d=Date.now())=>{r=d,n=null,i&&(clearTimeout(i),i=null),e(...m)};return[(...m)=>{const d=Date.now(),h=d-r;h>=a?l(m,d):(n=m,i||(i=setTimeout(()=>{i=null,l(n)},a-h)))},()=>n&&l(n)]}const ft=(e,t,r=3)=>{let a=0;const n=xi(50,250);return pi(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,u=l-a,m=n(u),d=l<=o;a=l;const h={loaded:l,total:o,progress:o?l/o:void 0,bytes:u,rate:m||void 0,estimated:m&&o&&d?(o-l)/m:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(h)},r)},As=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},Cs=e=>(...t)=>x.asap(()=>e(...t)),yi=X.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,X.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(X.origin),X.navigator&&/(msie|trident)/i.test(X.navigator.userAgent)):()=>!0,gi=X.hasStandardBrowserEnv?{write(e,t,r,a,n,i){const l=[e+"="+encodeURIComponent(t)];x.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),x.isString(a)&&l.push("path="+a),x.isString(n)&&l.push("domain="+n),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bi(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ji(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function vr(e,t,r){let a=!bi(t);return e&&(a||r==!1)?ji(e,t):t}const Fs=e=>e instanceof ne?{...e}:e;function Te(e,t){t=t||{};const r={};function a(m,d,h,g){return x.isPlainObject(m)&&x.isPlainObject(d)?x.merge.call({caseless:g},m,d):x.isPlainObject(d)?x.merge({},d):x.isArray(d)?d.slice():d}function n(m,d,h,g){if(x.isUndefined(d)){if(!x.isUndefined(m))return a(void 0,m,h,g)}else return a(m,d,h,g)}function i(m,d){if(!x.isUndefined(d))return a(void 0,d)}function l(m,d){if(x.isUndefined(d)){if(!x.isUndefined(m))return a(void 0,m)}else return a(void 0,d)}function o(m,d,h){if(h in t)return a(m,d);if(h in e)return a(void 0,m)}const u={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(m,d,h)=>n(Fs(m),Fs(d),h,!0)};return x.forEach(Object.keys({...e,...t}),function(d){const h=u[d]||n,g=h(e[d],t[d],d);x.isUndefined(g)&&h!==o||(r[d]=g)}),r}const Sr=e=>{const t=Te({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=t;t.headers=l=ne.from(l),t.url=gr(vr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let u;if(x.isFormData(r)){if(X.hasStandardBrowserEnv||X.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((u=l.getContentType())!==!1){const[m,...d]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];l.setContentType([m||"multipart/form-data",...d].join("; "))}}if(X.hasStandardBrowserEnv&&(a&&x.isFunction(a)&&(a=a(t)),a||a!==!1&&yi(t.url))){const m=n&&i&&gi.read(i);m&&l.set(n,m)}return t},wi=typeof XMLHttpRequest<"u",Ni=wi&&function(e){return new Promise(function(r,a){const n=Sr(e);let i=n.data;const l=ne.from(n.headers).normalize();let{responseType:o,onUploadProgress:u,onDownloadProgress:m}=n,d,h,g,F,b;function v(){F&&F(),b&&b(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(n.method.toUpperCase(),n.url,!0),y.timeout=n.timeout;function E(){if(!y)return;const T=ne.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:T,config:e,request:y};Nr(function(P){r(P),v()},function(P){a(P),v()},_),y=null}"onloadend"in y?y.onloadend=E:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(E)},y.onabort=function(){y&&(a(new L("Request aborted",L.ECONNABORTED,e,y)),y=null)},y.onerror=function(){a(new L("Network Error",L.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let D=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const _=n.transitional||br;n.timeoutErrorMessage&&(D=n.timeoutErrorMessage),a(new L(D,_.clarifyTimeoutError?L.ETIMEDOUT:L.ECONNABORTED,e,y)),y=null},i===void 0&&l.setContentType(null),"setRequestHeader"in y&&x.forEach(l.toJSON(),function(D,_){y.setRequestHeader(_,D)}),x.isUndefined(n.withCredentials)||(y.withCredentials=!!n.withCredentials),o&&o!=="json"&&(y.responseType=n.responseType),m&&([g,b]=ft(m,!0),y.addEventListener("progress",g)),u&&y.upload&&([h,F]=ft(u),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",F)),(n.cancelToken||n.signal)&&(d=T=>{y&&(a(!T||T.type?new qe(null,e,y):T),y.abort(),y=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const C=hi(n.url);if(C&&X.protocols.indexOf(C)===-1){a(new L("Unsupported protocol "+C+":",L.ERR_BAD_REQUEST,e));return}y.send(i||null)})},vi=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,n;const i=function(m){if(!n){n=!0,o();const d=m instanceof Error?m:this.reason;a.abort(d instanceof L?d:new qe(d instanceof Error?d.message:d))}};let l=t&&setTimeout(()=>{l=null,i(new L(`timeout ${t} of ms exceeded`,L.ETIMEDOUT))},t);const o=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),e=null)};e.forEach(m=>m.addEventListener("abort",i));const{signal:u}=a;return u.unsubscribe=()=>x.asap(o),u}},Si=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let a=0,n;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},Ei=async function*(e,t){for await(const r of Ai(e))yield*Si(r,t)},Ai=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},Rs=(e,t,r,a)=>{const n=Ei(e,t);let i=0,l,o=u=>{l||(l=!0,a&&a(u))};return new ReadableStream({async pull(u){try{const{done:m,value:d}=await n.next();if(m){o(),u.close();return}let h=d.byteLength;if(r){let g=i+=h;r(g)}u.enqueue(new Uint8Array(d))}catch(m){throw o(m),m}},cancel(u){return o(u),n.return()}},{highWaterMark:2})},At=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Er=At&&typeof ReadableStream=="function",Ci=At&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Ar=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Fi=Er&&Ar(()=>{let e=!1;const t=new Request(X.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ds=64*1024,Wt=Er&&Ar(()=>x.isReadableStream(new Response("").body)),ht={stream:Wt&&(e=>e.body)};At&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ht[t]&&(ht[t]=x.isFunction(e[t])?r=>r[t]():(r,a)=>{throw new L(`Response type '${t}' is not supported`,L.ERR_NOT_SUPPORT,a)})})})(new Response);const Ri=async e=>{if(e==null)return 0;if(x.isBlob(e))return e.size;if(x.isSpecCompliantForm(e))return(await new Request(X.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(x.isArrayBufferView(e)||x.isArrayBuffer(e))return e.byteLength;if(x.isURLSearchParams(e)&&(e=e+""),x.isString(e))return(await Ci(e)).byteLength},Di=async(e,t)=>{const r=x.toFiniteNumber(e.getContentLength());return r??Ri(t)},Oi=At&&(async e=>{let{url:t,method:r,data:a,signal:n,cancelToken:i,timeout:l,onDownloadProgress:o,onUploadProgress:u,responseType:m,headers:d,withCredentials:h="same-origin",fetchOptions:g}=Sr(e);m=m?(m+"").toLowerCase():"text";let F=vi([n,i&&i.toAbortSignal()],l),b;const v=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let y;try{if(u&&Fi&&r!=="get"&&r!=="head"&&(y=await Di(d,a))!==0){let _=new Request(t,{method:"POST",body:a,duplex:"half"}),j;if(x.isFormData(a)&&(j=_.headers.get("content-type"))&&d.setContentType(j),_.body){const[P,ue]=As(y,ft(Cs(u)));a=Rs(_.body,Ds,P,ue)}}x.isString(h)||(h=h?"include":"omit");const E="credentials"in Request.prototype;b=new Request(t,{...g,signal:F,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:a,duplex:"half",credentials:E?h:void 0});let C=await fetch(b,g);const T=Wt&&(m==="stream"||m==="response");if(Wt&&(o||T&&v)){const _={};["status","statusText","headers"].forEach(ee=>{_[ee]=C[ee]});const j=x.toFiniteNumber(C.headers.get("content-length")),[P,ue]=o&&As(j,ft(Cs(o),!0))||[];C=new Response(Rs(C.body,Ds,P,()=>{ue&&ue(),v&&v()}),_)}m=m||"text";let D=await ht[x.findKey(ht,m)||"text"](C,e);return!T&&v&&v(),await new Promise((_,j)=>{Nr(_,j,{data:D,headers:ne.from(C.headers),status:C.status,statusText:C.statusText,config:e,request:b})})}catch(E){throw v&&v(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new L("Network Error",L.ERR_NETWORK,e,b),{cause:E.cause||E}):L.from(E,E&&E.code,e,b)}}),Jt={http:Wn,xhr:Ni,fetch:Oi};x.forEach(Jt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Os=e=>`- ${e}`,ki=e=>x.isFunction(e)||e===null||e===!1,Cr={getAdapter:e=>{e=x.isArray(e)?e:[e];const{length:t}=e;let r,a;const n={};for(let i=0;i<t;i++){r=e[i];let l;if(a=r,!ki(r)&&(a=Jt[(l=String(r)).toLowerCase()],a===void 0))throw new L(`Unknown adapter '${l}'`);if(a)break;n[l||"#"+i]=a}if(!a){const i=Object.entries(n).map(([o,u])=>`adapter ${o} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=t?i.length>1?`since :
`+i.map(Os).join(`
`):" "+Os(i[0]):"as no adapter specified";throw new L("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:Jt};function Ut(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new qe(null,e)}function ks(e){return Ut(e),e.headers=ne.from(e.headers),e.data=Pt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Cr.getAdapter(e.adapter||et.adapter)(e).then(function(a){return Ut(e),a.data=Pt.call(e,e.transformResponse,a),a.headers=ne.from(a.headers),a},function(a){return wr(a)||(Ut(e),a&&a.response&&(a.response.data=Pt.call(e,e.transformResponse,a.response),a.response.headers=ne.from(a.response.headers))),Promise.reject(a)})}const Fr="1.11.0",Ct={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ct[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const _s={};Ct.transitional=function(t,r,a){function n(i,l){return"[Axios v"+Fr+"] Transitional option '"+i+"'"+l+(a?". "+a:"")}return(i,l,o)=>{if(t===!1)throw new L(n(l," has been removed"+(r?" in "+r:"")),L.ERR_DEPRECATED);return r&&!_s[l]&&(_s[l]=!0,console.warn(n(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,l,o):!0}};Ct.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function _i(e,t,r){if(typeof e!="object")throw new L("options must be an object",L.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let n=a.length;for(;n-- >0;){const i=a[n],l=t[i];if(l){const o=e[i],u=o===void 0||l(o,i,e);if(u!==!0)throw new L("option "+i+" must be "+u,L.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new L("Unknown option "+i,L.ERR_BAD_OPTION)}}const ct={assertOptions:_i,validators:Ct},he=ct.validators;let _e=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ss,response:new Ss}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Te(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:i}=r;a!==void 0&&ct.assertOptions(a,{silentJSONParsing:he.transitional(he.boolean),forcedJSONParsing:he.transitional(he.boolean),clarifyTimeoutError:he.transitional(he.boolean)},!1),n!=null&&(x.isFunction(n)?r.paramsSerializer={serialize:n}:ct.assertOptions(n,{encode:he.function,serialize:he.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ct.assertOptions(r,{baseUrl:he.spelling("baseURL"),withXsrfToken:he.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&x.merge(i.common,i[r.method]);i&&x.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),r.headers=ne.concat(l,i);const o=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(u=u&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const m=[];this.interceptors.response.forEach(function(v){m.push(v.fulfilled,v.rejected)});let d,h=0,g;if(!u){const b=[ks.bind(this),void 0];for(b.unshift(...o),b.push(...m),g=b.length,d=Promise.resolve(r);h<g;)d=d.then(b[h++],b[h++]);return d}g=o.length;let F=r;for(h=0;h<g;){const b=o[h++],v=o[h++];try{F=b(F)}catch(y){v.call(this,y);break}}try{d=ks.call(this,F)}catch(b){return Promise.reject(b)}for(h=0,g=m.length;h<g;)d=d.then(m[h++],m[h++]);return d}getUri(t){t=Te(this.defaults,t);const r=vr(t.baseURL,t.url,t.allowAbsoluteUrls);return gr(r,t.params,t.paramsSerializer)}};x.forEach(["delete","get","head","options"],function(t){_e.prototype[t]=function(r,a){return this.request(Te(a||{},{method:t,url:r,data:(a||{}).data}))}});x.forEach(["post","put","patch"],function(t){function r(a){return function(i,l,o){return this.request(Te(o||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}_e.prototype[t]=r(),_e.prototype[t+"Form"]=r(!0)});let Ti=class Rr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(n=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](n);a._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{a.subscribe(o),i=o}).then(n);return l.cancel=function(){a.unsubscribe(i)},l},t(function(i,l,o){a.reason||(a.reason=new qe(i,l,o),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Rr(function(n){t=n}),cancel:t}}};function Li(e){return function(r){return e.apply(null,r)}}function Pi(e){return x.isObject(e)&&e.isAxiosError===!0}const Kt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kt).forEach(([e,t])=>{Kt[t]=e});function Dr(e){const t=new _e(e),r=ir(_e.prototype.request,t);return x.extend(r,_e.prototype,t,{allOwnKeys:!0}),x.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return Dr(Te(e,n))},r}const z=Dr(et);z.Axios=_e;z.CanceledError=qe;z.CancelToken=Ti;z.isCancel=wr;z.VERSION=Fr;z.toFormData=Et;z.AxiosError=L;z.Cancel=z.CanceledError;z.all=function(t){return Promise.all(t)};z.spread=Li;z.isAxiosError=Pi;z.mergeConfig=Te;z.AxiosHeaders=ne;z.formToJSON=e=>jr(x.isHTMLForm(e)?new FormData(e):e);z.getAdapter=Cr.getAdapter;z.HttpStatusCode=Kt;z.default=z;const{Axios:Sl,AxiosError:El,CanceledError:Al,isCancel:Cl,CancelToken:Fl,VERSION:Rl,all:Dl,Cancel:Ol,isAxiosError:kl,spread:_l,toFormData:Tl,AxiosHeaders:Ll,HttpStatusCode:Pl,formToJSON:Ul,getAdapter:Vl,mergeConfig:Bl}=z,Ui="http://localhost:3000",U=z.create({baseURL:Ui,headers:{"Content-Type":"application/json"},withCredentials:!0});U.interceptors.request.use(e=>{var t;return console.log(`Making ${(t=e.method)==null?void 0:t.toUpperCase()} request to ${e.url}`),e},e=>Promise.reject(e));U.interceptors.response.use(e=>e.data,e=>{var t,r,a;return console.error("API Error:",((t=e.response)==null?void 0:t.data)||e.message),((r=e.response)==null?void 0:r.status)===401&&(localStorage.clear(),sessionStorage.clear(),window.location.href="/login"),(a=e.response)!=null&&a.data?Promise.reject(e.response.data):Promise.reject(e.message)});const we={getAll:()=>U.get("/api/customers"),getById:e=>U.get(`/api/customers/${e}`),create:e=>U.post("/api/customers",e),update:(e,t)=>U.put(`/api/customers/${e}`,t),delete:e=>U.delete(`/api/customers/${e}`),search:e=>U.get(`/api/customers/search?q=${encodeURIComponent(e)}`)},Oe={getAll:()=>U.get("/api/contacts"),getById:e=>U.get(`/api/contacts/${e}`),getByCustomerId:e=>U.get(`/api/contacts/customer/${e}`),create:e=>U.post("/api/contacts",e),update:(e,t)=>U.put(`/api/contacts/${e}`,t),delete:e=>U.delete(`/api/contacts/${e}`)},le={getAll:()=>U.get("/api/deals"),getById:e=>U.get(`/api/deals/${e}`),getByCustomerId:e=>U.get(`/api/deals/customer/${e}`),getByStatus:e=>U.get(`/api/deals/status/${e}`),getStats:()=>U.get("/api/deals/stats"),create:e=>U.post("/api/deals",e),update:(e,t)=>U.put(`/api/deals/${e}`,t),delete:e=>U.delete(`/api/deals/${e}`)},nt={login:(e,t)=>U.post("/api/auth/login",{email:e,password:t}),logout:()=>U.post("/api/auth/logout"),me:()=>U.get("/api/auth/me"),changePassword:(e,t)=>U.post("/api/auth/change-password",{currentPassword:e,newPassword:t}),register:e=>U.post("/api/auth/register",e)},Pe={getAll:()=>U.get("/api/users"),getById:e=>U.get(`/api/users/${e}`),create:e=>U.post("/api/users",e),update:(e,t)=>U.put(`/api/users/${e}`,t),delete:e=>U.delete(`/api/users/${e}`),getStats:()=>U.get("/api/users/stats"),toggleStatus:e=>U.post(`/api/users/${e}/toggle-status`)},Ts=()=>{localStorage.clear(),sessionStorage.clear(),U.defaults.cache&&U.defaults.cache.clear()},Or=w.createContext(),ts=()=>{const e=w.useContext(Or);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Vi=({children:e})=>{const[t,r]=w.useState(null),[a,n]=w.useState(!0),[i,l]=w.useState(!1);Ks(),w.useEffect(()=>{o()},[]);const o=async()=>{try{const b=await nt.me();console.log("Auth check response:",b),b.success?(r(b.data),l(!0)):(console.log("Auth check failed:",b.error),u())}catch(b){console.error("Auth check failed:",b),u()}finally{n(!1)}},u=()=>{r(null),l(!1),n(!1),Ts()},F={user:t,isAuthenticated:i,loading:a,login:async(b,v)=>{try{const y=await nt.login(b,v);return console.log("Login response:",y),y.success?(r(y.data.user),l(!0),{success:!0}):{success:!1,error:y.error}}catch(y){return console.error("Login failed:",y),{success:!1,error:"Login failed"}}},logout:async()=>{try{await nt.logout()}catch(b){console.error("Logout failed:",b)}finally{u(),Ts(),window.location.href="/login"}},changePassword:async(b,v)=>{try{const y=await nt.changePassword(b,v);return y.success?{success:!0}:{success:!1,error:y.error}}catch(y){return console.error("Password change failed:",y),{success:!1,error:"Password change failed"}}},isAdmin:()=>(t==null?void 0:t.role)==="admin",checkAuth:o,clearAuthState:u};return s.jsx(Or.Provider,{value:F,children:e})},Ls=({children:e,requireAdmin:t=!1})=>{const{isAuthenticated:r,loading:a,isAdmin:n}=ts();return a?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r?t&&!n()?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600",children:"You need admin privileges to access this page."})]})}):e:s.jsx(Yr,{to:"/login",replace:!0})};function Bi(){const e=Gr(),[t,r]=w.useState(!1),{user:a,logout:n,isAdmin:i}=ts(),l=[{name:"Dashboard",href:"/",icon:ra},{name:"Customers",href:"/customers",icon:Bt},{name:"Contacts",href:"/contacts",icon:Ve},{name:"Deals",href:"/deals",icon:Ne},...i()?[{name:"Users",href:"/users",icon:aa}]:[]],o=async()=>{try{await n(),k.success("Logged out successfully")}catch{k.error("Logout failed")}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden ${t?"block":"hidden"}`,children:[s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),s.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[s.jsxs("div",{className:"flex h-16 items-center justify-between px-4",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Dumb CRM"}),s.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(na,{className:"h-6 w-6"})})]}),s.jsx("nav",{className:"flex-1 space-y-1 px-2 py-4",children:l.map(u=>{const m=e.pathname===u.href;return s.jsxs(K,{to:u.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md ${m?"bg-primary-100 text-primary-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,onClick:()=>r(!1),children:[s.jsx(u.icon,{className:"mr-3 h-5 w-5"}),u.name]},u.name)})})]})]}),s.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:s.jsxs("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[s.jsx("div",{className:"flex h-16 items-center px-4",children:s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Dumb CRM"})}),s.jsx("nav",{className:"flex-1 space-y-1 px-2 py-4",children:l.map(u=>{const m=e.pathname===u.href;return s.jsxs(K,{to:u.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md ${m?"bg-primary-100 text-primary-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(u.icon,{className:"mr-3 h-5 w-5"}),u.name]},u.name)})})]})}),s.jsxs("div",{className:"lg:pl-64",children:[s.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[s.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>r(!0),children:s.jsx(ia,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[s.jsx("div",{className:"flex flex-1"}),s.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:["Welcome, ",a==null?void 0:a.name]}),(a==null?void 0:a.role)==="admin"&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Admin"}),s.jsxs("button",{onClick:o,className:"flex items-center gap-x-2 text-sm text-gray-500 hover:text-gray-700",children:[s.jsx(la,{className:"h-4 w-4"}),"Logout"]})]})]})]}),s.jsx("main",{className:"py-6",children:s.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:s.jsx(ea,{})})})]})]})}const $i=()=>{const[e,t]=w.useState(""),[r,a]=w.useState(""),[n,i]=w.useState(!1),[l,o]=w.useState(!1),{login:u}=ts(),m=Ks(),d=async h=>{if(h.preventDefault(),!e||!r){k.error("Please fill in all fields");return}o(!0);try{const g=await u(e,r);g.success?(k.success("Login successful!"),m("/")):k.error(g.error||"Login failed")}catch{k.error("Login failed")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-primary-100",children:s.jsx(oa,{className:"h-6 w-6 text-primary-600"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to Dumb CRM"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Access your customer relationship management system"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:h=>t(h.target.value),className:"mt-1 input",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:h=>a(h.target.value),className:"input pr-10",placeholder:"Enter your password"}),s.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>i(!n),children:n?s.jsx(ca,{className:"h-4 w-4 text-gray-400"}):s.jsx(Zt,{className:"h-4 w-4 text-gray-400"})})]})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Sign in"})}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-md",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Default Admin Account"}),s.jsxs("p",{className:"text-xs text-blue-700",children:[s.jsx("strong",{children:"Email:"})," admin@dumbcrm.com",s.jsx("br",{}),s.jsx("strong",{children:"Password:"})," admin123"]}),s.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Please change the password after first login!"})]})]})]})})},Ii=()=>{const[e,t]=w.useState({customers:0,contacts:0,deals:0,totalValue:0,wonValue:0}),[r,a]=w.useState(!0);w.useEffect(()=>{(async()=>{var l,o,u,m,d;try{const[h,g,F,b]=await Promise.all([we.getAll(),Oe.getAll(),le.getAll(),le.getStats()]);t({customers:((l=h.data)==null?void 0:l.length)||0,contacts:((o=g.data)==null?void 0:o.length)||0,deals:((u=F.data)==null?void 0:u.length)||0,totalValue:((m=b.data)==null?void 0:m.totalValue)||0,wonValue:((d=b.data)==null?void 0:d.wonValue)||0})}catch(h){k.error("Failed to load dashboard statistics"),console.error("Dashboard error:",h)}finally{a(!1)}})()},[]);const n=[{name:"Total Customers",value:e.customers,icon:Bt,color:"bg-blue-500",href:"/customers"},{name:"Total Contacts",value:e.contacts,icon:Ve,color:"bg-green-500",href:"/contacts"},{name:"Total Deals",value:e.deals,icon:Ne,color:"bg-purple-500",href:"/deals"},{name:"Won Value",value:`$${e.wonValue.toLocaleString()}`,icon:gs,color:"bg-yellow-500",href:"/deals"}];return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Welcome to your CRM dashboard. Here's an overview of your business."})]}),s.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:n.map(i=>s.jsx(K,{to:i.href,className:"card hover:shadow-md transition-shadow duration-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`p-3 rounded-lg ${i.color}`,children:s.jsx(i.icon,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:i.name}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.value})]})]})},i.name))}),s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(K,{to:"/customers",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(Bt,{className:"h-5 w-5 text-primary-600 mr-3"}),s.jsx("span",{className:"text-sm font-medium",children:"View Customers"})]}),s.jsxs(K,{to:"/contacts",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 text-primary-600 mr-3"}),s.jsx("span",{className:"text-sm font-medium",children:"View Contacts"})]}),s.jsxs(K,{to:"/deals",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(Ne,{className:"h-5 w-5 text-primary-600 mr-3"}),s.jsx("span",{className:"text-sm font-medium",children:"View Deals"})]}),s.jsxs(K,{to:"/deals",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(gs,{className:"h-5 w-5 text-primary-600 mr-3"}),s.jsx("span",{className:"text-sm font-medium",children:"Deal Statistics"})]})]})]})]})};var tt=e=>e.type==="checkbox",ke=e=>e instanceof Date,G=e=>e==null;const kr=e=>typeof e=="object";var H=e=>!G(e)&&!Array.isArray(e)&&kr(e)&&!ke(e),qi=e=>H(e)&&e.target?tt(e.target)?e.target.checked:e.target.value:e,Mi=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Hi=(e,t)=>e.has(Mi(t)),zi=e=>{const t=e.constructor&&e.constructor.prototype;return H(t)&&t.hasOwnProperty("isPrototypeOf")},ss=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Z(e){let t;const r=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(ss&&(e instanceof Blob||a))&&(r||H(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!zi(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=Z(e[n]));else return e;return t}var Ft=e=>/^\w*$/.test(e),J=e=>e===void 0,rs=e=>Array.isArray(e)?e.filter(Boolean):[],as=e=>rs(e.replace(/["|']|\]/g,"").split(/\.|\[/)),R=(e,t,r)=>{if(!t||!H(e))return r;const a=(Ft(t)?[t]:as(t)).reduce((n,i)=>G(n)?n:n[i],e);return J(a)||a===e?J(e[t])?r:e[t]:a},xe=e=>typeof e=="boolean",q=(e,t,r)=>{let a=-1;const n=Ft(t)?[t]:as(t),i=n.length,l=i-1;for(;++a<i;){const o=n[a];let u=r;if(a!==l){const m=e[o];u=H(m)||Array.isArray(m)?m:isNaN(+n[a+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=u,e=e[o]}};const Ps={BLUR:"blur",FOCUS_OUT:"focusout"},oe={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},je={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Wi=se.createContext(null);Wi.displayName="HookFormContext";var Ji=(e,t,r,a=!0)=>{const n={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(n,i,{get:()=>{const l=i;return t._proxyFormState[l]!==oe.all&&(t._proxyFormState[l]=!a||oe.all),e[l]}});return n};const Ki=typeof window<"u"?se.useLayoutEffect:se.useEffect;var ye=e=>typeof e=="string",Qi=(e,t,r,a,n)=>ye(e)?(a&&t.watch.add(e),R(r,e,n)):Array.isArray(e)?e.map(i=>(a&&t.watch.add(i),R(r,i))):(a&&(t.watchAll=!0),r),Qt=e=>G(e)||!kr(e);function Ae(e,t,r=new WeakSet){if(Qt(e)||Qt(t))return e===t;if(ke(e)&&ke(t))return e.getTime()===t.getTime();const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of a){const l=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const o=t[i];if(ke(l)&&ke(o)||H(l)&&H(o)||Array.isArray(l)&&Array.isArray(o)?!Ae(l,o,r):l!==o)return!1}}return!0}var Zi=(e,t,r,a,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[a]:n||!0}}:{},Je=e=>Array.isArray(e)?e:[e],Us=()=>{let e=[];return{get observers(){return e},next:n=>{for(const i of e)i.next&&i.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(i=>i!==n)}}),unsubscribe:()=>{e=[]}}},re=e=>H(e)&&!Object.keys(e).length,ns=e=>e.type==="file",ce=e=>typeof e=="function",xt=e=>{if(!ss)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},_r=e=>e.type==="select-multiple",is=e=>e.type==="radio",Xi=e=>is(e)||tt(e),Vt=e=>xt(e)&&e.isConnected;function Yi(e,t){const r=t.slice(0,-1).length;let a=0;for(;a<r;)e=J(e)?a++:e[t[a++]];return e}function Gi(e){for(const t in e)if(e.hasOwnProperty(t)&&!J(e[t]))return!1;return!0}function W(e,t){const r=Array.isArray(t)?t:Ft(t)?[t]:as(t),a=r.length===1?e:Yi(e,r),n=r.length-1,i=r[n];return a&&delete a[i],n!==0&&(H(a)&&re(a)||Array.isArray(a)&&Gi(a))&&W(e,r.slice(0,-1)),e}var Tr=e=>{for(const t in e)if(ce(e[t]))return!0;return!1};function pt(e,t={}){const r=Array.isArray(e);if(H(e)||r)for(const a in e)Array.isArray(e[a])||H(e[a])&&!Tr(e[a])?(t[a]=Array.isArray(e[a])?[]:{},pt(e[a],t[a])):G(e[a])||(t[a]=!0);return t}function Lr(e,t,r){const a=Array.isArray(e);if(H(e)||a)for(const n in e)Array.isArray(e[n])||H(e[n])&&!Tr(e[n])?J(t)||Qt(r[n])?r[n]=Array.isArray(e[n])?pt(e[n],[]):{...pt(e[n])}:Lr(e[n],G(t)?{}:t[n],r[n]):r[n]=!Ae(e[n],t[n]);return r}var ze=(e,t)=>Lr(e,t,pt(t));const Vs={value:!1,isValid:!1},Bs={value:!0,isValid:!0};var Pr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!J(e[0].attributes.value)?J(e[0].value)||e[0].value===""?Bs:{value:e[0].value,isValid:!0}:Bs:Vs}return Vs},Ur=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:a})=>J(e)?e:t?e===""?NaN:e&&+e:r&&ye(e)?new Date(e):a?a(e):e;const $s={isValid:!1,value:null};var Vr=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,$s):$s;function Is(e){const t=e.ref;return ns(t)?t.files:is(t)?Vr(e.refs).value:_r(t)?[...t.selectedOptions].map(({value:r})=>r):tt(t)?Pr(e.refs).value:Ur(J(t.value)?e.ref.value:t.value,e)}var el=(e,t,r,a)=>{const n={};for(const i of e){const l=R(t,i);l&&q(n,i,l._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:a}},yt=e=>e instanceof RegExp,We=e=>J(e)?e:yt(e)?e.source:H(e)?yt(e.value)?e.value.source:e.value:e,qs=e=>({isOnSubmit:!e||e===oe.onSubmit,isOnBlur:e===oe.onBlur,isOnChange:e===oe.onChange,isOnAll:e===oe.all,isOnTouch:e===oe.onTouched});const Ms="AsyncFunction";var tl=e=>!!e&&!!e.validate&&!!(ce(e.validate)&&e.validate.constructor.name===Ms||H(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Ms)),sl=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Hs=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const Ke=(e,t,r,a)=>{for(const n of r||Object.keys(e)){const i=R(e,n);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],n)&&!a)return!0;if(l.ref&&t(l.ref,l.name)&&!a)return!0;if(Ke(o,t))break}else if(H(o)&&Ke(o,t))break}}};function zs(e,t,r){const a=R(e,r);if(a||Ft(r))return{error:a,name:r};const n=r.split(".");for(;n.length;){const i=n.join("."),l=R(t,i),o=R(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};n.pop()}return{name:r}}var rl=(e,t,r,a)=>{r(e);const{name:n,...i}=e;return re(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!a||oe.all))},al=(e,t,r)=>!e||!t||e===t||Je(e).some(a=>a&&(r?a===t:a.startsWith(t)||t.startsWith(a))),nl=(e,t,r,a,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?a.isOnBlur:n.isOnBlur)?!e:(r?a.isOnChange:n.isOnChange)?e:!0,il=(e,t)=>!rs(R(e,t)).length&&W(e,t),ll=(e,t,r)=>{const a=Je(R(e,r));return q(a,"root",t[r]),q(e,r,a),e},dt=e=>ye(e);function Ws(e,t,r="validate"){if(dt(e)||Array.isArray(e)&&e.every(dt)||xe(e)&&!e)return{type:r,message:dt(e)?e:"",ref:t}}var Ue=e=>H(e)&&!yt(e)?e:{value:e,message:""},Js=async(e,t,r,a,n,i)=>{const{ref:l,refs:o,required:u,maxLength:m,minLength:d,min:h,max:g,pattern:F,validate:b,name:v,valueAsNumber:y,mount:E}=e._f,C=R(r,v);if(!E||t.has(v))return{};const T=o?o[0]:l,D=V=>{n&&T.reportValidity&&(T.setCustomValidity(xe(V)?"":V||""),T.reportValidity())},_={},j=is(l),P=tt(l),ue=j||P,ee=(y||ns(l))&&J(l.value)&&J(C)||xt(l)&&l.value===""||C===""||Array.isArray(C)&&!C.length,Re=Zi.bind(null,v,a,_),me=(V,$,M,Y=je.maxLength,te=je.minLength)=>{const fe=V?$:M;_[v]={type:V?Y:te,message:fe,ref:l,...Re(V?Y:te,fe)}};if(i?!Array.isArray(C)||!C.length:u&&(!ue&&(ee||G(C))||xe(C)&&!C||P&&!Pr(o).isValid||j&&!Vr(o).isValid)){const{value:V,message:$}=dt(u)?{value:!!u,message:u}:Ue(u);if(V&&(_[v]={type:je.required,message:$,ref:T,...Re(je.required,$)},!a))return D($),_}if(!ee&&(!G(h)||!G(g))){let V,$;const M=Ue(g),Y=Ue(h);if(!G(C)&&!isNaN(C)){const te=l.valueAsNumber||C&&+C;G(M.value)||(V=te>M.value),G(Y.value)||($=te<Y.value)}else{const te=l.valueAsDate||new Date(C),fe=st=>new Date(new Date().toDateString()+" "+st),Me=l.type=="time",Le=l.type=="week";ye(M.value)&&C&&(V=Me?fe(C)>fe(M.value):Le?C>M.value:te>new Date(M.value)),ye(Y.value)&&C&&($=Me?fe(C)<fe(Y.value):Le?C<Y.value:te<new Date(Y.value))}if((V||$)&&(me(!!V,M.message,Y.message,je.max,je.min),!a))return D(_[v].message),_}if((m||d)&&!ee&&(ye(C)||i&&Array.isArray(C))){const V=Ue(m),$=Ue(d),M=!G(V.value)&&C.length>+V.value,Y=!G($.value)&&C.length<+$.value;if((M||Y)&&(me(M,V.message,$.message),!a))return D(_[v].message),_}if(F&&!ee&&ye(C)){const{value:V,message:$}=Ue(F);if(yt(V)&&!C.match(V)&&(_[v]={type:je.pattern,message:$,ref:l,...Re(je.pattern,$)},!a))return D($),_}if(b){if(ce(b)){const V=await b(C,r),$=Ws(V,T);if($&&(_[v]={...$,...Re(je.validate,$.message)},!a))return D($.message),_}else if(H(b)){let V={};for(const $ in b){if(!re(V)&&!a)break;const M=Ws(await b[$](C,r),T,$);M&&(V={...M,...Re($,M.message)},D(M.message),a&&(_[v]=V))}if(!re(V)&&(_[v]={ref:T,...V},!a))return _}}return D(!0),_};const ol={mode:oe.onSubmit,reValidateMode:oe.onChange,shouldFocusError:!0};function cl(e={}){let t={...ol,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ce(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},a={},n=H(t.defaultValues)||H(t.values)?Z(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Z(n),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,m=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const g={array:Us(),state:Us()},F=t.criteriaMode===oe.all,b=c=>f=>{clearTimeout(m),m=setTimeout(c,f)},v=async c=>{if(!t.disabled&&(d.isValid||h.isValid||c)){const f=t.resolver?re((await P()).errors):await ee(a,!0);f!==r.isValid&&g.state.next({isValid:f})}},y=(c,f)=>{!t.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((c||Array.from(o.mount)).forEach(p=>{p&&(f?q(r.validatingFields,p,f):W(r.validatingFields,p))}),g.state.next({validatingFields:r.validatingFields,isValidating:!re(r.validatingFields)}))},E=(c,f=[],p,A,S=!0,N=!0)=>{if(A&&p&&!t.disabled){if(l.action=!0,N&&Array.isArray(R(a,c))){const O=p(R(a,c),A.argA,A.argB);S&&q(a,c,O)}if(N&&Array.isArray(R(r.errors,c))){const O=p(R(r.errors,c),A.argA,A.argB);S&&q(r.errors,c,O),il(r.errors,c)}if((d.touchedFields||h.touchedFields)&&N&&Array.isArray(R(r.touchedFields,c))){const O=p(R(r.touchedFields,c),A.argA,A.argB);S&&q(r.touchedFields,c,O)}(d.dirtyFields||h.dirtyFields)&&(r.dirtyFields=ze(n,i)),g.state.next({name:c,isDirty:me(c,f),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else q(i,c,f)},C=(c,f)=>{q(r.errors,c,f),g.state.next({errors:r.errors})},T=c=>{r.errors=c,g.state.next({errors:r.errors,isValid:!1})},D=(c,f,p,A)=>{const S=R(a,c);if(S){const N=R(i,c,J(p)?R(n,c):p);J(N)||A&&A.defaultChecked||f?q(i,c,f?N:Is(S._f)):M(c,N),l.mount&&v()}},_=(c,f,p,A,S)=>{let N=!1,O=!1;const B={name:c};if(!t.disabled){if(!p||A){(d.isDirty||h.isDirty)&&(O=r.isDirty,r.isDirty=B.isDirty=me(),N=O!==B.isDirty);const I=Ae(R(n,c),f);O=!!R(r.dirtyFields,c),I?W(r.dirtyFields,c):q(r.dirtyFields,c,!0),B.dirtyFields=r.dirtyFields,N=N||(d.dirtyFields||h.dirtyFields)&&O!==!I}if(p){const I=R(r.touchedFields,c);I||(q(r.touchedFields,c,p),B.touchedFields=r.touchedFields,N=N||(d.touchedFields||h.touchedFields)&&I!==p)}N&&S&&g.state.next(B)}return N?B:{}},j=(c,f,p,A)=>{const S=R(r.errors,c),N=(d.isValid||h.isValid)&&xe(f)&&r.isValid!==f;if(t.delayError&&p?(u=b(()=>C(c,p)),u(t.delayError)):(clearTimeout(m),u=null,p?q(r.errors,c,p):W(r.errors,c)),(p?!Ae(S,p):S)||!re(A)||N){const O={...A,...N&&xe(f)?{isValid:f}:{},errors:r.errors,name:c};r={...r,...O},g.state.next(O)}},P=async c=>{y(c,!0);const f=await t.resolver(i,t.context,el(c||o.mount,a,t.criteriaMode,t.shouldUseNativeValidation));return y(c),f},ue=async c=>{const{errors:f}=await P(c);if(c)for(const p of c){const A=R(f,p);A?q(r.errors,p,A):W(r.errors,p)}else r.errors=f;return f},ee=async(c,f,p={valid:!0})=>{for(const A in c){const S=c[A];if(S){const{_f:N,...O}=S;if(N){const B=o.array.has(N.name),I=S._f&&tl(S._f);I&&d.validatingFields&&y([A],!0);const ie=await Js(S,o.disabled,i,F,t.shouldUseNativeValidation&&!f,B);if(I&&d.validatingFields&&y([A]),ie[N.name]&&(p.valid=!1,f))break;!f&&(R(ie,N.name)?B?ll(r.errors,ie,N.name):q(r.errors,N.name,ie[N.name]):W(r.errors,N.name))}!re(O)&&await ee(O,f,p)}}return p.valid},Re=()=>{for(const c of o.unMount){const f=R(a,c);f&&(f._f.refs?f._f.refs.every(p=>!Vt(p)):!Vt(f._f.ref))&&Dt(c)}o.unMount=new Set},me=(c,f)=>!t.disabled&&(c&&f&&q(i,c,f),!Ae(st(),n)),V=(c,f,p)=>Qi(c,o,{...l.mount?i:J(f)?n:ye(c)?{[c]:f}:f},p,f),$=c=>rs(R(l.mount?i:n,c,t.shouldUnregister?R(n,c,[]):[])),M=(c,f,p={})=>{const A=R(a,c);let S=f;if(A){const N=A._f;N&&(!N.disabled&&q(i,c,Ur(f,N)),S=xt(N.ref)&&G(f)?"":f,_r(N.ref)?[...N.ref.options].forEach(O=>O.selected=S.includes(O.value)):N.refs?tt(N.ref)?N.refs.forEach(O=>{(!O.defaultChecked||!O.disabled)&&(Array.isArray(S)?O.checked=!!S.find(B=>B===O.value):O.checked=S===O.value||!!S)}):N.refs.forEach(O=>O.checked=O.value===S):ns(N.ref)?N.ref.value="":(N.ref.value=S,N.ref.type||g.state.next({name:c,values:Z(i)})))}(p.shouldDirty||p.shouldTouch)&&_(c,S,p.shouldTouch,p.shouldDirty,!0),p.shouldValidate&&Le(c)},Y=(c,f,p)=>{for(const A in f){if(!f.hasOwnProperty(A))return;const S=f[A],N=c+"."+A,O=R(a,N);(o.array.has(c)||H(S)||O&&!O._f)&&!ke(S)?Y(N,S,p):M(N,S,p)}},te=(c,f,p={})=>{const A=R(a,c),S=o.array.has(c),N=Z(f);q(i,c,N),S?(g.array.next({name:c,values:Z(i)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&p.shouldDirty&&g.state.next({name:c,dirtyFields:ze(n,i),isDirty:me(c,N)})):A&&!A._f&&!G(N)?Y(c,N,p):M(c,N,p),Hs(c,o)&&g.state.next({...r,name:c}),g.state.next({name:l.mount?c:void 0,values:Z(i)})},fe=async c=>{l.mount=!0;const f=c.target;let p=f.name,A=!0;const S=R(a,p),N=I=>{A=Number.isNaN(I)||ke(I)&&isNaN(I.getTime())||Ae(I,R(i,p,I))},O=qs(t.mode),B=qs(t.reValidateMode);if(S){let I,ie;const rt=f.type?Is(S._f):qi(c),Se=c.type===Ps.BLUR||c.type===Ps.FOCUS_OUT,Kr=!sl(S._f)&&!t.resolver&&!R(r.errors,p)&&!S._f.deps||nl(Se,R(r.touchedFields,p),r.isSubmitted,B,O),_t=Hs(p,o,Se);q(i,p,rt),Se?(!f||!f.readOnly)&&(S._f.onBlur&&S._f.onBlur(c),u&&u(0)):S._f.onChange&&S._f.onChange(c);const Tt=_(p,rt,Se),Qr=!re(Tt)||_t;if(!Se&&g.state.next({name:p,type:c.type,values:Z(i)}),Kr)return(d.isValid||h.isValid)&&(t.mode==="onBlur"?Se&&v():Se||v()),Qr&&g.state.next({name:p,..._t?{}:Tt});if(!Se&&_t&&g.state.next({...r}),t.resolver){const{errors:ps}=await P([p]);if(N(rt),A){const Zr=zs(r.errors,a,p),ys=zs(ps,a,Zr.name||p);I=ys.error,p=ys.name,ie=re(ps)}}else y([p],!0),I=(await Js(S,o.disabled,i,F,t.shouldUseNativeValidation))[p],y([p]),N(rt),A&&(I?ie=!1:(d.isValid||h.isValid)&&(ie=await ee(a,!0)));A&&(S._f.deps&&Le(S._f.deps),j(p,ie,I,Tt))}},Me=(c,f)=>{if(R(r.errors,f)&&c.focus)return c.focus(),1},Le=async(c,f={})=>{let p,A;const S=Je(c);if(t.resolver){const N=await ue(J(c)?c:S);p=re(N),A=c?!S.some(O=>R(N,O)):p}else c?(A=(await Promise.all(S.map(async N=>{const O=R(a,N);return await ee(O&&O._f?{[N]:O}:O)}))).every(Boolean),!(!A&&!r.isValid)&&v()):A=p=await ee(a);return g.state.next({...!ye(c)||(d.isValid||h.isValid)&&p!==r.isValid?{}:{name:c},...t.resolver||!c?{isValid:p}:{},errors:r.errors}),f.shouldFocus&&!A&&Ke(a,Me,c?S:o.mount),A},st=c=>{const f={...l.mount?i:n};return J(c)?f:ye(c)?R(f,c):c.map(p=>R(f,p))},os=(c,f)=>({invalid:!!R((f||r).errors,c),isDirty:!!R((f||r).dirtyFields,c),error:R((f||r).errors,c),isValidating:!!R(r.validatingFields,c),isTouched:!!R((f||r).touchedFields,c)}),Ir=c=>{c&&Je(c).forEach(f=>W(r.errors,f)),g.state.next({errors:c?r.errors:{}})},cs=(c,f,p)=>{const A=(R(a,c,{_f:{}})._f||{}).ref,S=R(r.errors,c)||{},{ref:N,message:O,type:B,...I}=S;q(r.errors,c,{...I,...f,ref:A}),g.state.next({name:c,errors:r.errors,isValid:!1}),p&&p.shouldFocus&&A&&A.focus&&A.focus()},qr=(c,f)=>ce(c)?g.state.subscribe({next:p=>"values"in p&&c(V(void 0,f),p)}):V(c,f,!0),ds=c=>g.state.subscribe({next:f=>{al(c.name,f.name,c.exact)&&rl(f,c.formState||d,Jr,c.reRenderRoot)&&c.callback({values:{...i},...r,...f,defaultValues:n})}}).unsubscribe,Mr=c=>(l.mount=!0,h={...h,...c.formState},ds({...c,formState:h})),Dt=(c,f={})=>{for(const p of c?Je(c):o.mount)o.mount.delete(p),o.array.delete(p),f.keepValue||(W(a,p),W(i,p)),!f.keepError&&W(r.errors,p),!f.keepDirty&&W(r.dirtyFields,p),!f.keepTouched&&W(r.touchedFields,p),!f.keepIsValidating&&W(r.validatingFields,p),!t.shouldUnregister&&!f.keepDefaultValue&&W(n,p);g.state.next({values:Z(i)}),g.state.next({...r,...f.keepDirty?{isDirty:me()}:{}}),!f.keepIsValid&&v()},us=({disabled:c,name:f})=>{(xe(c)&&l.mount||c||o.disabled.has(f))&&(c?o.disabled.add(f):o.disabled.delete(f))},Ot=(c,f={})=>{let p=R(a,c);const A=xe(f.disabled)||xe(t.disabled);return q(a,c,{...p||{},_f:{...p&&p._f?p._f:{ref:{name:c}},name:c,mount:!0,...f}}),o.mount.add(c),p?us({disabled:xe(f.disabled)?f.disabled:t.disabled,name:c}):D(c,!0,f.value),{...A?{disabled:f.disabled||t.disabled}:{},...t.progressive?{required:!!f.required,min:We(f.min),max:We(f.max),minLength:We(f.minLength),maxLength:We(f.maxLength),pattern:We(f.pattern)}:{},name:c,onChange:fe,onBlur:fe,ref:S=>{if(S){Ot(c,f),p=R(a,c);const N=J(S.value)&&S.querySelectorAll&&S.querySelectorAll("input,select,textarea")[0]||S,O=Xi(N),B=p._f.refs||[];if(O?B.find(I=>I===N):N===p._f.ref)return;q(a,c,{_f:{...p._f,...O?{refs:[...B.filter(Vt),N,...Array.isArray(R(n,c))?[{}]:[]],ref:{type:N.type,name:c}}:{ref:N}}}),D(c,!1,void 0,N)}else p=R(a,c,{}),p._f&&(p._f.mount=!1),(t.shouldUnregister||f.shouldUnregister)&&!(Hi(o.array,c)&&l.action)&&o.unMount.add(c)}}},kt=()=>t.shouldFocusError&&Ke(a,Me,o.mount),Hr=c=>{xe(c)&&(g.state.next({disabled:c}),Ke(a,(f,p)=>{const A=R(a,p);A&&(f.disabled=A._f.disabled||c,Array.isArray(A._f.refs)&&A._f.refs.forEach(S=>{S.disabled=A._f.disabled||c}))},0,!1))},ms=(c,f)=>async p=>{let A;p&&(p.preventDefault&&p.preventDefault(),p.persist&&p.persist());let S=Z(i);if(g.state.next({isSubmitting:!0}),t.resolver){const{errors:N,values:O}=await P();r.errors=N,S=Z(O)}else await ee(a);if(o.disabled.size)for(const N of o.disabled)W(S,N);if(W(r.errors,"root"),re(r.errors)){g.state.next({errors:{}});try{await c(S,p)}catch(N){A=N}}else f&&await f({...r.errors},p),kt(),setTimeout(kt);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:re(r.errors)&&!A,submitCount:r.submitCount+1,errors:r.errors}),A)throw A},zr=(c,f={})=>{R(a,c)&&(J(f.defaultValue)?te(c,Z(R(n,c))):(te(c,f.defaultValue),q(n,c,Z(f.defaultValue))),f.keepTouched||W(r.touchedFields,c),f.keepDirty||(W(r.dirtyFields,c),r.isDirty=f.defaultValue?me(c,Z(R(n,c))):me()),f.keepError||(W(r.errors,c),d.isValid&&v()),g.state.next({...r}))},fs=(c,f={})=>{const p=c?Z(c):n,A=Z(p),S=re(c),N=S?n:A;if(f.keepDefaultValues||(n=p),!f.keepValues){if(f.keepDirtyValues){const O=new Set([...o.mount,...Object.keys(ze(n,i))]);for(const B of Array.from(O))R(r.dirtyFields,B)?q(N,B,R(i,B)):te(B,R(N,B))}else{if(ss&&J(c))for(const O of o.mount){const B=R(a,O);if(B&&B._f){const I=Array.isArray(B._f.refs)?B._f.refs[0]:B._f.ref;if(xt(I)){const ie=I.closest("form");if(ie){ie.reset();break}}}}if(f.keepFieldsRef)for(const O of o.mount)te(O,R(N,O));else a={}}i=t.shouldUnregister?f.keepDefaultValues?Z(n):{}:Z(N),g.array.next({values:{...N}}),g.state.next({values:{...N}})}o={mount:f.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!d.isValid||!!f.keepIsValid||!!f.keepDirtyValues,l.watch=!!t.shouldUnregister,g.state.next({submitCount:f.keepSubmitCount?r.submitCount:0,isDirty:S?!1:f.keepDirty?r.isDirty:!!(f.keepDefaultValues&&!Ae(c,n)),isSubmitted:f.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:S?{}:f.keepDirtyValues?f.keepDefaultValues&&i?ze(n,i):r.dirtyFields:f.keepDefaultValues&&c?ze(n,c):f.keepDirty?r.dirtyFields:{},touchedFields:f.keepTouched?r.touchedFields:{},errors:f.keepErrors?r.errors:{},isSubmitSuccessful:f.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},hs=(c,f)=>fs(ce(c)?c(i):c,f),Wr=(c,f={})=>{const p=R(a,c),A=p&&p._f;if(A){const S=A.refs?A.refs[0]:A.ref;S.focus&&(S.focus(),f.shouldSelect&&ce(S.select)&&S.select())}},Jr=c=>{r={...r,...c}},xs={control:{register:Ot,unregister:Dt,getFieldState:os,handleSubmit:ms,setError:cs,_subscribe:ds,_runSchema:P,_focusError:kt,_getWatch:V,_getDirty:me,_setValid:v,_setFieldArray:E,_setDisabledField:us,_setErrors:T,_getFieldArray:$,_reset:fs,_resetDefaultValues:()=>ce(t.defaultValues)&&t.defaultValues().then(c=>{hs(c,t.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:Re,_disableForm:Hr,_subjects:g,_proxyFormState:d,get _fields(){return a},get _formValues(){return i},get _state(){return l},set _state(c){l=c},get _defaultValues(){return n},get _names(){return o},set _names(c){o=c},get _formState(){return r},get _options(){return t},set _options(c){t={...t,...c}}},subscribe:Mr,trigger:Le,register:Ot,handleSubmit:ms,watch:qr,setValue:te,getValues:st,reset:hs,resetField:zr,clearErrors:Ir,unregister:Dt,setError:cs,setFocus:Wr,getFieldState:os};return{...xs,formControl:xs}}function Rt(e={}){const t=se.useRef(void 0),r=se.useRef(void 0),[a,n]=se.useState({isDirty:!1,isValidating:!1,isLoading:ce(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ce(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!ce(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...o}=cl(e);t.current={...o,formState:a}}const i=t.current.control;return i._options=e,Ki(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),se.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),se.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),se.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),se.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),se.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==a.isDirty&&i._subjects.state.next({isDirty:l})}},[i,a.isDirty]),se.useEffect(()=>{e.values&&!Ae(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,n(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),se.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Ji(a,i),t.current}const Br=({customer:e,onSubmit:t,onCancel:r})=>{const[a,n]=w.useState(!1),{register:i,handleSubmit:l,formState:{errors:o},reset:u}=Rt({defaultValues:e||{name:"",email:"",phone:"",company:""}}),m=async d=>{n(!0);try{await t(d),u()}catch(h){console.error("Form submission error:",h)}finally{n(!1)}};return s.jsxs("form",{onSubmit:l(m),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),s.jsx("input",{type:"text",id:"name",...i("name",{required:"Name is required"}),className:"input",placeholder:"Enter customer name"}),o.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsx("input",{type:"email",id:"email",...i("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"input",placeholder:"Enter email address"}),o.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.email.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",id:"phone",...i("phone"),className:"input",placeholder:"Enter phone number"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),s.jsx("input",{type:"text",id:"company",...i("company"),className:"input",placeholder:"Enter company name"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Saving...":e?"Update":"Create"})]})]})},dl=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState(""),[l,o]=w.useState(!1),[u,m]=w.useState(null),d=async()=>{try{a(!0);const y=await we.getAll();t(y.data||[])}catch(y){k.error("Failed to fetch customers"),console.error("Fetch customers error:",y)}finally{a(!1)}},h=async y=>{if(!y.trim()){d();return}try{a(!0);const E=await we.search(y);t(E.data||[])}catch(E){k.error("Failed to search customers"),console.error("Search error:",E)}finally{a(!1)}},g=async y=>{if(window.confirm("Are you sure you want to delete this customer?"))try{await we.delete(y),k.success("Customer deleted successfully"),d()}catch(E){k.error("Failed to delete customer"),console.error("Delete error:",E)}},F=async y=>{try{u?(await we.update(u.id,y),k.success("Customer updated successfully")):(await we.create(y),k.success("Customer created successfully")),o(!1),m(null),d()}catch(E){k.error(u?"Failed to update customer":"Failed to create customer"),console.error("Form submit error:",E)}},b=y=>{m(y),o(!0)},v=()=>{o(!1),m(null)};return w.useEffect(()=>{d()},[]),w.useEffect(()=>{const y=setTimeout(()=>{h(n)},300);return()=>clearTimeout(y)},[n]),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Customers"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your customer relationships and information."})]}),s.jsxs("button",{onClick:()=>o(!0),className:"btn btn-primary flex items-center",children:[s.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add Customer"]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search customers...",value:n,onChange:y=>i(y.target.value),className:"input pl-10"})]})}),l&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:u?"Edit Customer":"Add New Customer"}),s.jsx(Br,{customer:u,onSubmit:F,onCancel:v})]})}),s.jsx("div",{className:"card",children:r?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"No customers found."}),s.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary mt-4",children:"Add your first customer"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Phone"}),s.jsx("th",{children:"Company"}),s.jsx("th",{children:"Contacts"}),s.jsx("th",{children:"Deals"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:e.map(y=>{var E,C;return s.jsxs("tr",{children:[s.jsx("td",{className:"font-medium",children:y.name}),s.jsx("td",{children:y.email}),s.jsx("td",{children:y.phone||"-"}),s.jsx("td",{children:y.company||"-"}),s.jsx("td",{children:((E=y.contacts)==null?void 0:E.length)||0}),s.jsx("td",{children:((C=y.deals)==null?void 0:C.length)||0}),s.jsx("td",{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(K,{to:`/customers/${y.id}`,className:"text-primary-600 hover:text-primary-900",title:"View Details",children:s.jsx(Zt,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>b(y),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:s.jsx(Be,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>g(y.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:s.jsx($e,{className:"h-4 w-4"})})]})})]},y.id)})})]})})})]})},$r=({contact:e,onSubmit:t,onCancel:r})=>{const[a,n]=w.useState(!1),{register:i,handleSubmit:l,formState:{errors:o},reset:u}=Rt({defaultValues:e||{name:"",email:"",phone:"",position:""}}),m=async d=>{n(!0);try{await t(d),u()}catch(h){console.error("Form submission error:",h)}finally{n(!1)}};return s.jsxs("form",{onSubmit:l(m),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),s.jsx("input",{type:"text",id:"name",...i("name",{required:"Name is required"}),className:"input",placeholder:"Enter contact name"}),o.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsx("input",{type:"email",id:"email",...i("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"input",placeholder:"Enter email address"}),o.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.email.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",id:"phone",...i("phone"),className:"input",placeholder:"Enter phone number"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),s.jsx("input",{type:"text",id:"position",...i("position"),className:"input",placeholder:"Enter position/title"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Saving...":e?"Update":"Create"})]})]})},ls=({deal:e,onSubmit:t,onCancel:r})=>{const[a,n]=w.useState(!1),{register:i,handleSubmit:l,formState:{errors:o},reset:u}=Rt({defaultValues:e||{title:"",description:"",value:"",status:"open"}}),m=async d=>{n(!0);try{await t(d),u()}catch(h){console.error("Form submission error:",h)}finally{n(!1)}};return s.jsxs("form",{onSubmit:l(m),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),s.jsx("input",{type:"text",id:"title",...i("title",{required:"Title is required"}),className:"input",placeholder:"Enter deal title"}),o.title&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.title.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{id:"description",...i("description"),className:"input",rows:3,placeholder:"Enter deal description"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"value",className:"block text-sm font-medium text-gray-700 mb-1",children:"Value *"}),s.jsx("input",{type:"number",id:"value",step:"0.01",min:"0",...i("value",{required:"Value is required",min:{value:0,message:"Value must be positive"}}),className:"input",placeholder:"Enter deal value"}),o.value&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.value.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{id:"status",...i("status"),className:"input",children:[s.jsx("option",{value:"open",children:"Open"}),s.jsx("option",{value:"won",children:"Won"}),s.jsx("option",{value:"lost",children:"Lost"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Saving...":e?"Update":"Create"})]})]})},ul=()=>{const{id:e}=Qs(),[t,r]=w.useState(null),[a,n]=w.useState([]),[i,l]=w.useState([]),[o,u]=w.useState(!0),[m,d]=w.useState(!1),[h,g]=w.useState(!1),[F,b]=w.useState(!1),v=async()=>{try{u(!0);const[D,_,j]=await Promise.all([we.getById(e),Oe.getByCustomerId(e),le.getByCustomerId(e)]);r(D.data),n(_.data||[]),l(j.data||[])}catch(D){k.error("Failed to fetch customer data"),console.error("Fetch customer error:",D)}finally{u(!1)}},y=async D=>{try{await we.update(e,D),k.success("Customer updated successfully"),d(!1),v()}catch(_){k.error("Failed to update customer"),console.error("Update error:",_)}},E=async()=>{if(window.confirm("Are you sure you want to delete this customer? This will also delete all associated contacts and deals."))try{await we.delete(e),k.success("Customer deleted successfully"),window.location.href="/customers"}catch(D){k.error("Failed to delete customer"),console.error("Delete error:",D)}},C=async D=>{try{await Oe.create({...D,customerId:e}),k.success("Contact created successfully"),g(!1),v()}catch(_){k.error("Failed to create contact"),console.error("Contact creation error:",_)}},T=async D=>{try{await le.create({...D,customerId:e}),k.success("Deal created successfully"),b(!1),v()}catch(_){k.error("Failed to create deal"),console.error("Deal creation error:",_)}};return w.useEffect(()=>{v()},[e]),o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(K,{to:"/customers",className:"mr-4 text-gray-400 hover:text-gray-600",children:s.jsx(Zs,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.name}),s.jsx("p",{className:"mt-2 text-gray-600",children:t.email})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:()=>d(!0),className:"btn btn-secondary flex items-center",children:[s.jsx(Be,{className:"h-4 w-4 mr-2"}),"Edit Customer"]}),s.jsxs("button",{onClick:E,className:"btn btn-danger flex items-center",children:[s.jsx($e,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),s.jsx("p",{className:"text-gray-900",children:t.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),s.jsx("p",{className:"text-gray-900",children:t.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),s.jsx("p",{className:"text-gray-900",children:t.phone||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Company"}),s.jsx("p",{className:"text-gray-900",children:t.company||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Created"}),s.jsx("p",{className:"text-gray-900",children:new Date(t.createdAt).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Last Updated"}),s.jsx("p",{className:"text-gray-900",children:new Date(t.updatedAt).toLocaleDateString()})]})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"card",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>g(!0),className:"w-full btn btn-primary flex items-center justify-center",children:[s.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add Contact"]}),s.jsxs("button",{onClick:()=>b(!0),className:"w-full btn btn-primary flex items-center justify-center",children:[s.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add Deal"]})]})]}),s.jsxs("div",{className:"card",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Contacts:"}),s.jsx("span",{className:"font-medium",children:a.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Deals:"}),s.jsx("span",{className:"font-medium",children:i.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Value:"}),s.jsxs("span",{className:"font-medium",children:["$",i.reduce((D,_)=>D+_.value,0).toLocaleString()]})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(Ve,{className:"h-5 w-5 mr-2"}),"Contacts (",a.length,")"]}),s.jsx("button",{onClick:()=>g(!0),className:"btn btn-primary btn-sm",children:s.jsx(Ce,{className:"h-4 w-4"})})]}),a.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No contacts yet."}):s.jsx("div",{className:"space-y-3",children:a.map(D=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:D.name}),s.jsx("p",{className:"text-sm text-gray-600",children:D.email}),D.phone&&s.jsx("p",{className:"text-sm text-gray-600",children:D.phone}),D.position&&s.jsx("p",{className:"text-sm text-gray-500",children:D.position})]},D.id))})]}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(Ne,{className:"h-5 w-5 mr-2"}),"Deals (",i.length,")"]}),s.jsx("button",{onClick:()=>b(!0),className:"btn btn-primary btn-sm",children:s.jsx(Ce,{className:"h-4 w-4"})})]}),i.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No deals yet."}):s.jsx("div",{className:"space-y-3",children:i.map(D=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:D.title}),s.jsxs("p",{className:"text-sm text-gray-600",children:["$",D.value.toLocaleString()]})]}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D.status==="won"?"bg-green-100 text-green-800":D.status==="lost"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:D.status})]}),D.description&&s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:D.description})]},D.id))})]})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Edit Customer"}),s.jsx(Br,{customer:t,onSubmit:y,onCancel:()=>d(!1)})]})}),h&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Add Contact"}),s.jsx($r,{onSubmit:C,onCancel:()=>g(!1)})]})}),F&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Add Deal"}),s.jsx(ls,{onSubmit:T,onCancel:()=>b(!1)})]})})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"Customer not found."}),s.jsx(K,{to:"/customers",className:"btn btn-primary mt-4",children:"Back to Customers"})]})},ml=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState(""),[l,o]=w.useState(!1),[u,m]=w.useState(null),d=async()=>{try{a(!0);const E=await Oe.getAll();t(E.data||[])}catch(E){k.error("Failed to fetch contacts"),console.error("Fetch contacts error:",E)}finally{a(!1)}},h=E=>{i(E)},g=e.filter(E=>E.name.toLowerCase().includes(n.toLowerCase())||E.email.toLowerCase().includes(n.toLowerCase())||E.position&&E.position.toLowerCase().includes(n.toLowerCase())),F=async E=>{if(window.confirm("Are you sure you want to delete this contact?"))try{await Oe.delete(E),k.success("Contact deleted successfully"),d()}catch(C){k.error("Failed to delete contact"),console.error("Delete error:",C)}},b=async E=>{try{u?(await Oe.update(u.id,E),k.success("Contact updated successfully")):(await Oe.create(E),k.success("Contact created successfully")),o(!1),m(null),d()}catch(C){k.error(u?"Failed to update contact":"Failed to create contact"),console.error("Form submit error:",C)}},v=E=>{m(E),o(!0)},y=()=>{o(!1),m(null)};return w.useEffect(()=>{d()},[]),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Contacts"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your customer contacts and their information."})]}),s.jsxs("button",{onClick:()=>o(!0),className:"btn btn-primary flex items-center",children:[s.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add Contact"]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search contacts...",value:n,onChange:E=>h(E.target.value),className:"input pl-10"})]})}),l&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:u?"Edit Contact":"Add New Contact"}),s.jsx($r,{contact:u,onSubmit:b,onCancel:y})]})}),s.jsx("div",{className:"card",children:r?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):g.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:n?"No contacts found matching your search.":"No contacts found."}),!n&&s.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary mt-4",children:"Add your first contact"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Phone"}),s.jsx("th",{children:"Position"}),s.jsx("th",{children:"Customer"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:g.map(E=>s.jsxs("tr",{children:[s.jsx("td",{className:"font-medium",children:E.name}),s.jsx("td",{children:E.email}),s.jsx("td",{children:E.phone||"-"}),s.jsx("td",{children:E.position||"-"}),s.jsx("td",{children:E.customer?s.jsx(K,{to:`/customers/${E.customer.id}`,className:"text-primary-600 hover:text-primary-900",children:E.customer.name}):"-"}),s.jsx("td",{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>v(E),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:s.jsx(Be,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>F(E.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:s.jsx($e,{className:"h-4 w-4"})})]})})]},E.id))})]})})})]})},fl=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(null),[n,i]=w.useState(!0),[l,o]=w.useState(""),[u,m]=w.useState("all"),[d,h]=w.useState(!1),[g,F]=w.useState(null),b=async()=>{try{i(!0);const[j,P]=await Promise.all([le.getAll(),le.getStats()]);t(j.data||[]),a(P.data)}catch(j){k.error("Failed to fetch deals"),console.error("Fetch deals error:",j)}finally{i(!1)}},v=j=>{o(j)},y=e.filter(j=>{const P=j.title.toLowerCase().includes(l.toLowerCase())||j.description&&j.description.toLowerCase().includes(l.toLowerCase())||j.customer.name.toLowerCase().includes(l.toLowerCase()),ue=u==="all"||j.status===u;return P&&ue}),E=async j=>{if(window.confirm("Are you sure you want to delete this deal?"))try{await le.delete(j),k.success("Deal deleted successfully"),b()}catch(P){k.error("Failed to delete deal"),console.error("Delete error:",P)}},C=async j=>{try{g?(await le.update(g.id,j),k.success("Deal updated successfully")):(await le.create(j),k.success("Deal created successfully")),h(!1),F(null),b()}catch(P){k.error(g?"Failed to update deal":"Failed to create deal"),console.error("Form submit error:",P)}},T=j=>{F(j),h(!0)},D=()=>{h(!1),F(null)},_=j=>{switch(j){case"won":return"bg-green-100 text-green-800";case"lost":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return w.useEffect(()=>{b()},[]),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Deals"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Track and manage your sales deals and opportunities."})]}),s.jsxs("button",{onClick:()=>h(!0),className:"btn btn-primary flex items-center",children:[s.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add Deal"]})]}),r&&s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:s.jsx(Ne,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Deals"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.totalDeals})]})]})}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-lg bg-yellow-500",children:s.jsx(Ne,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Open Deals"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.openDeals})]})]})}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:s.jsx(Ne,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Won Deals"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.wonDeals})]})]})}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:s.jsx(Ne,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Won Value"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.wonValue.toLocaleString()]})]})]})})]}),s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search deals...",value:l,onChange:j=>v(j.target.value),className:"input pl-10"})]}),s.jsxs("select",{value:u,onChange:j=>m(j.target.value),className:"input w-full sm:w-auto",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"open",children:"Open"}),s.jsx("option",{value:"won",children:"Won"}),s.jsx("option",{value:"lost",children:"Lost"})]})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:g?"Edit Deal":"Add New Deal"}),s.jsx(ls,{deal:g,onSubmit:C,onCancel:D})]})}),s.jsx("div",{className:"card",children:n?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):y.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:l||u!=="all"?"No deals found matching your criteria.":"No deals found."}),!l&&u==="all"&&s.jsx("button",{onClick:()=>h(!0),className:"btn btn-primary mt-4",children:"Add your first deal"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Title"}),s.jsx("th",{children:"Customer"}),s.jsx("th",{children:"Value"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Created"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:y.map(j=>s.jsxs("tr",{children:[s.jsx("td",{className:"font-medium",children:j.title}),s.jsx("td",{children:s.jsx(K,{to:`/customers/${j.customer.id}`,className:"text-primary-600 hover:text-primary-900",children:j.customer.name})}),s.jsxs("td",{children:["$",j.value.toLocaleString()]}),s.jsx("td",{children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_(j.status)}`,children:j.status})}),s.jsx("td",{children:new Date(j.createdAt).toLocaleDateString()}),s.jsx("td",{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(K,{to:`/deals/${j.id}`,className:"text-primary-600 hover:text-primary-900",title:"View Details",children:s.jsx(Zt,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>T(j),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:s.jsx(Be,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>E(j.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:s.jsx($e,{className:"h-4 w-4"})})]})})]},j.id))})]})})})]})},hl=()=>{const{id:e}=Qs(),[t,r]=w.useState(null),[a,n]=w.useState(!0),[i,l]=w.useState(!1),o=async()=>{try{n(!0);const h=await le.getById(e);r(h.data)}catch(h){k.error("Failed to fetch deal"),console.error("Fetch deal error:",h)}finally{n(!1)}},u=async h=>{try{await le.update(e,h),k.success("Deal updated successfully"),l(!1),o()}catch(g){k.error("Failed to update deal"),console.error("Update error:",g)}},m=async()=>{if(window.confirm("Are you sure you want to delete this deal?"))try{await le.delete(e),k.success("Deal deleted successfully"),window.location.href="/deals"}catch(h){k.error("Failed to delete deal"),console.error("Delete error:",h)}},d=h=>{switch(h){case"won":return"bg-green-100 text-green-800";case"lost":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return w.useEffect(()=>{o()},[e]),a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(K,{to:"/deals",className:"mr-4 text-gray-400 hover:text-gray-600",children:s.jsx(Zs,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.title}),s.jsxs("p",{className:"mt-2 text-gray-600",children:["Deal with ",t.customer.name]})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:()=>l(!0),className:"btn btn-secondary flex items-center",children:[s.jsx(Be,{className:"h-4 w-4 mr-2"}),"Edit Deal"]}),s.jsxs("button",{onClick:m,className:"btn btn-danger flex items-center",children:[s.jsx($e,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Deal Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Title"}),s.jsx("p",{className:"text-gray-900",children:t.title})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Value"}),s.jsxs("p",{className:"text-gray-900 text-lg font-semibold",children:["$",t.value.toLocaleString()]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),s.jsx("p",{className:"text-gray-900",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${d(t.status)}`,children:t.status})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Customer"}),s.jsx("p",{className:"text-gray-900",children:s.jsx(K,{to:`/customers/${t.customer.id}`,className:"text-primary-600 hover:text-primary-900",children:t.customer.name})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Created"}),s.jsx("p",{className:"text-gray-900",children:new Date(t.createdAt).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Last Updated"}),s.jsx("p",{className:"text-gray-900",children:new Date(t.updatedAt).toLocaleDateString()})]})]}),t.description&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),s.jsx("p",{className:"text-gray-900 mt-1",children:t.description})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"card",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2"}),"Customer"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),s.jsx("p",{className:"text-gray-900",children:s.jsx(K,{to:`/customers/${t.customer.id}`,className:"text-primary-600 hover:text-primary-900",children:t.customer.name})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),s.jsx("p",{className:"text-gray-900",children:t.customer.email})]}),t.customer.phone&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),s.jsx("p",{className:"text-gray-900",children:t.customer.phone})]}),t.customer.company&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Company"}),s.jsx("p",{className:"text-gray-900",children:t.customer.company})]})]})]}),s.jsxs("div",{className:"card",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(K,{to:`/customers/${t.customer.id}`,className:"w-full btn btn-secondary flex items-center justify-center",children:[s.jsx(ut,{className:"h-4 w-4 mr-2"}),"View Customer"]}),s.jsxs(K,{to:"/deals",className:"w-full btn btn-secondary flex items-center justify-center",children:[s.jsx(Ne,{className:"h-4 w-4 mr-2"}),"All Deals"]})]})]})]})]}),i&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Edit Deal"}),s.jsx(ls,{deal:t,onSubmit:u,onCancel:()=>l(!1)})]})})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"Deal not found."}),s.jsx(K,{to:"/deals",className:"btn btn-primary mt-4",children:"Back to Deals"})]})},xl=({user:e,onSubmit:t,onCancel:r})=>{const[a,n]=w.useState(!1),{register:i,handleSubmit:l,formState:{errors:o},reset:u,watch:m}=Rt({defaultValues:e||{name:"",email:"",password:"",role:"user",isActive:!0}}),d=!!e,h=m("role"),g=async F=>{n(!0);try{d&&!F.password&&delete F.password,await t(F),u()}catch(b){console.error("Form submission error:",b)}finally{n(!1)}};return s.jsxs("form",{onSubmit:l(g),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),s.jsx("input",{type:"text",id:"name",...i("name",{required:"Name is required"}),className:"input",placeholder:"Enter full name"}),o.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsx("input",{type:"email",id:"email",...i("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"input",placeholder:"Enter email address"}),o.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.email.message})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",d?"(leave empty to keep current)":"*"]}),s.jsx("input",{type:"password",id:"password",...i("password",{required:d?!1:"Password is required",minLength:d?void 0:{value:6,message:"Password must be at least 6 characters"}}),className:"input",placeholder:d?"Enter new password (optional)":"Enter password"}),o.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.password.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),s.jsxs("select",{id:"role",...i("role",{required:"Role is required"}),className:"input",children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"admin",children:"Admin"})]}),o.role&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.role.message})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",...i("isActive"),className:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active user"})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Inactive users cannot log in to the system"})]}),h==="admin"&&s.jsx("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-purple-800",children:[s.jsx("strong",{children:"Admin users"})," have full access to the system including user management."]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Saving...":d?"Update User":"Create User"})]})]})},pl=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(null),[n,i]=w.useState(!0),[l,o]=w.useState(""),[u,m]=w.useState(!1),[d,h]=w.useState(null),g=async()=>{try{i(!0);const[j,P]=await Promise.all([Pe.getAll(),Pe.getStats()]);if(j.success)t(j.data||[]);else{k.error(j.error||"Failed to fetch users");return}P.success?a(P.data):k.error(P.error||"Failed to fetch user statistics")}catch(j){const P=j.error||j.message||"Failed to fetch users";k.error(P),console.error("Fetch users error:",j)}finally{i(!1)}},F=j=>{o(j)},b=e.filter(j=>j.name.toLowerCase().includes(l.toLowerCase())||j.email.toLowerCase().includes(l.toLowerCase())||j.role.toLowerCase().includes(l.toLowerCase())),v=async j=>{if(window.confirm("Are you sure you want to delete this user?"))try{await Pe.delete(j),k.success("User deleted successfully"),g()}catch(P){k.error("Failed to delete user"),console.error("Delete error:",P)}},y=async j=>{try{const P=await Pe.toggleStatus(j);P.success&&(k.success(P.message),g())}catch(P){k.error("Failed to toggle user status"),console.error("Toggle status error:",P)}},E=async j=>{try{d?(await Pe.update(d.id,j),k.success("User updated successfully")):(await Pe.create(j),k.success("User created successfully")),m(!1),h(null),g()}catch(P){k.error(d?"Failed to update user":"Failed to create user"),console.error("Form submit error:",P)}},C=j=>{h(j),m(!0)},T=()=>{m(!1),h(null)};w.useEffect(()=>{g()},[]);const D=j=>{switch(j){case"admin":return"bg-purple-100 text-purple-800";default:return"bg-blue-100 text-blue-800"}},_=j=>j?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Manage system users and their permissions."})]}),s.jsxs("button",{onClick:()=>m(!0),className:"btn btn-primary flex items-center",children:[s.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),r&&s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:s.jsx(ut,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.totalUsers})]})]})}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:s.jsx(Ve,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.activeUsers})]})]})}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:s.jsx(da,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.adminUsers})]})]})}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-lg bg-gray-500",children:s.jsx(ut,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Regular Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.regularUsers})]})]})})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search users...",value:l,onChange:j=>F(j.target.value),className:"input pl-10"})]})}),u&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:d?"Edit User":"Add New User"}),s.jsx(xl,{user:d,onSubmit:E,onCancel:T})]})}),s.jsx("div",{className:"card",children:n?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):b.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:l?"No users found matching your search.":"No users found."}),!l&&s.jsx("button",{onClick:()=>m(!0),className:"btn btn-primary mt-4",children:"Add your first user"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Created"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:b.map(j=>s.jsxs("tr",{children:[s.jsx("td",{className:"font-medium",children:j.name}),s.jsx("td",{children:j.email}),s.jsx("td",{children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D(j.role)}`,children:j.role})}),s.jsx("td",{children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_(j.isActive)}`,children:j.isActive?"Active":"Inactive"})}),s.jsx("td",{children:new Date(j.createdAt).toLocaleDateString()}),s.jsx("td",{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>C(j),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:s.jsx(Be,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>y(j.id),className:j.isActive?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900",title:j.isActive?"Deactivate":"Activate",children:j.isActive?s.jsx(ua,{className:"h-4 w-4"}):s.jsx(Ve,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>v(j.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:s.jsx($e,{className:"h-4 w-4"})})]})})]},j.id))})]})})})]})};function yl(){return s.jsx(Vi,{children:s.jsxs(ta,{children:[s.jsx(ge,{path:"/login",element:s.jsx($i,{})}),s.jsxs(ge,{path:"/",element:s.jsx(Ls,{children:s.jsx(Bi,{})}),children:[s.jsx(ge,{index:!0,element:s.jsx(Ii,{})}),s.jsx(ge,{path:"customers",element:s.jsx(dl,{})}),s.jsx(ge,{path:"customers/:id",element:s.jsx(ul,{})}),s.jsx(ge,{path:"contacts",element:s.jsx(ml,{})}),s.jsx(ge,{path:"deals",element:s.jsx(fl,{})}),s.jsx(ge,{path:"deals/:id",element:s.jsx(hl,{})}),s.jsx(ge,{path:"users",element:s.jsx(Ls,{requireAdmin:!0,children:s.jsx(pl,{})})})]})]})})}$t.createRoot(document.getElementById("root")).render(s.jsx(se.StrictMode,{children:s.jsxs(sa,{children:[s.jsx(yl,{}),s.jsx(nn,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})}));
